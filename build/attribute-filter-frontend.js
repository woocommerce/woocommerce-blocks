(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var l in n)r.call(n,l)&&n[l]&&e.push(l);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},9010:(e,t,n)=>{"use strict";var r=n(4657);e.exports=function(e,t,n){n=n||{},9===t.nodeType&&(t=r.getWindow(t));var o=n.allowHorizontalScroll,s=n.onlyScrollIfNeeded,i=n.alignWithTop,l=n.alignWithLeft,a=n.offsetTop||0,c=n.offsetLeft||0,u=n.offsetBottom||0,d=n.offsetRight||0;o=void 0===o||o;var p=r.isWindow(t),m=r.offset(e),h=r.outerHeight(e),f=r.outerWidth(e),g=void 0,v=void 0,b=void 0,w=void 0,y=void 0,E=void 0,k=void 0,S=void 0,_=void 0,x=void 0;p?(k=t,x=r.height(k),_=r.width(k),S={left:r.scrollLeft(k),top:r.scrollTop(k)},y={left:m.left-S.left-c,top:m.top-S.top-a},E={left:m.left+f-(S.left+_)+d,top:m.top+h-(S.top+x)+u},w=S):(g=r.offset(t),v=t.clientHeight,b=t.clientWidth,w={left:t.scrollLeft,top:t.scrollTop},y={left:m.left-(g.left+(parseFloat(r.css(t,"borderLeftWidth"))||0))-c,top:m.top-(g.top+(parseFloat(r.css(t,"borderTopWidth"))||0))-a},E={left:m.left+f-(g.left+b+(parseFloat(r.css(t,"borderRightWidth"))||0))+d,top:m.top+h-(g.top+v+(parseFloat(r.css(t,"borderBottomWidth"))||0))+u}),y.top<0||E.top>0?!0===i?r.scrollTop(t,w.top+y.top):!1===i?r.scrollTop(t,w.top+E.top):y.top<0?r.scrollTop(t,w.top+y.top):r.scrollTop(t,w.top+E.top):s||((i=void 0===i||!!i)?r.scrollTop(t,w.top+y.top):r.scrollTop(t,w.top+E.top)),o&&(y.left<0||E.left>0?!0===l?r.scrollLeft(t,w.left+y.left):!1===l?r.scrollLeft(t,w.left+E.left):y.left<0?r.scrollLeft(t,w.left+y.left):r.scrollLeft(t,w.left+E.left):s||((l=void 0===l||!!l)?r.scrollLeft(t,w.left+y.left):r.scrollLeft(t,w.left+E.left)))}},4979:(e,t,n)=>{"use strict";e.exports=n(9010)},4657:e=>{"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function r(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function o(e){return r(e)}function s(e){return r(e,!0)}function i(e){var t=function(e){var t,n=void 0,r=void 0,o=e.ownerDocument,s=o.body,i=o&&o.documentElement;return n=(t=e.getBoundingClientRect()).left,r=t.top,{left:n-=i.clientLeft||s.clientLeft||0,top:r-=i.clientTop||s.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=o(r),t.top+=s(r),t}var l=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),a=/^(top|right|bottom|left)$/,c="currentStyle",u="runtimeStyle",d="left",p=void 0;function m(e,t){for(var n=0;n<e.length;n++)t(e[n])}function h(e){return"border-box"===p(e,"boxSizing")}"undefined"!=typeof window&&(p=window.getComputedStyle?function(e,t,n){var r="",o=e.ownerDocument,s=n||o.defaultView.getComputedStyle(e,null);return s&&(r=s.getPropertyValue(t)||s[t]),r}:function(e,t){var n=e[c]&&e[c][t];if(l.test(n)&&!a.test(t)){var r=e.style,o=r[d],s=e[u][d];e[u][d]=e[c][d],r[d]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[d]=o,e[u][d]=s}return""===n?"auto":n});var f=["margin","border","padding"],g=-1,v=2,b=1;function w(e,t,n){var r=0,o=void 0,s=void 0,i=void 0;for(s=0;s<t.length;s++)if(o=t[s])for(i=0;i<n.length;i++){var l;l="border"===o?o+n[i]+"Width":o+n[i],r+=parseFloat(p(e,l))||0}return r}function y(e){return null!=e&&e==e.window}var E={};function k(e,t,n){if(y(e))return"width"===t?E.viewportWidth(e):E.viewportHeight(e);if(9===e.nodeType)return"width"===t?E.docWidth(e):E.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.offsetWidth:e.offsetHeight,s=(p(e),h(e)),i=0;(null==o||o<=0)&&(o=void 0,(null==(i=p(e,t))||Number(i)<0)&&(i=e.style[t]||0),i=parseFloat(i)||0),void 0===n&&(n=s?b:g);var l=void 0!==o||s,a=o||i;if(n===g)return l?a-w(e,["border","padding"],r):i;if(l){var c=n===v?-w(e,["border"],r):w(e,["margin"],r);return a+(n===b?0:c)}return i+w(e,f.slice(n),r)}m(["Width","Height"],(function(e){E["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],E["viewport"+e](n))},E["viewport"+e]=function(t){var n="client"+e,r=t.document,o=r.body,s=r.documentElement[n];return"CSS1Compat"===r.compatMode&&s||o&&o[n]||s}}));var S={position:"absolute",visibility:"hidden",display:"block"};function _(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=k.apply(void 0,n):function(e,r,o){var s={},i=e.style,l=void 0;for(l in r)r.hasOwnProperty(l)&&(s[l]=i[l],i[l]=r[l]);for(l in function(){t=k.apply(void 0,n)}.call(e),r)r.hasOwnProperty(l)&&(i[l]=s[l])}(e,S),t}function x(e,t,r){var o=r;if("object"!==(void 0===t?"undefined":n(t)))return void 0!==o?("number"==typeof o&&(o+="px"),void(e.style[t]=o)):p(e,t);for(var s in t)t.hasOwnProperty(s)&&x(e,s,t[s])}m(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);E["outer"+t]=function(t,n){return t&&_(t,e,n?0:b)};var n="width"===e?["Left","Right"]:["Top","Bottom"];E[e]=function(t,r){return void 0===r?t&&_(t,e,g):t?(p(t),h(t)&&(r+=w(t,["padding","border"],n)),x(t,e,r)):void 0}})),e.exports=t({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return i(e);!function(e,t){"static"===x(e,"position")&&(e.style.position="relative");var n=i(e),r={},o=void 0,s=void 0;for(s in t)t.hasOwnProperty(s)&&(o=parseFloat(x(e,s))||0,r[s]=o+t[s]-n[s]);x(e,r)}(e,t)},isWindow:y,each:m,css:x,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(y(e)){if(void 0===t)return o(e);window.scrollTo(t,s(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(y(e)){if(void 0===t)return s(e);window.scrollTo(o(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},E)},4578:()=>{},6574:()=>{},1724:()=>{},7732:()=>{},770:()=>{},994:()=>{},230:()=>{},3057:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}const r=window.wp.i18n,o=window.wc.wcSettings;var s;const i=(0,o.getSetting)("wcBlocksConfig",{buildPhase:1,pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),l=i.pluginUrl+"images/",a=(i.pluginUrl,i.buildPhase,null===(s=o.STORE_PAGES.shop)||void 0===s||s.permalink,o.STORE_PAGES.checkout.id,o.STORE_PAGES.checkout.permalink,o.STORE_PAGES.privacy.permalink,o.STORE_PAGES.privacy.title,o.STORE_PAGES.terms.permalink,o.STORE_PAGES.terms.title,o.STORE_PAGES.cart.id,o.STORE_PAGES.cart.permalink,o.STORE_PAGES.myaccount.permalink?o.STORE_PAGES.myaccount.permalink:(0,o.getSetting)("wpLoginUrl","/wp-login.php"),(0,o.getSetting)("localPickupEnabled",!1),(0,o.getSetting)("countries",{})),c=(0,o.getSetting)("countryData",{}),u=(Object.fromEntries(Object.keys(c).filter((e=>!0===c[e].allowBilling)).map((e=>[e,a[e]||""]))),Object.fromEntries(Object.keys(c).filter((e=>!0===c[e].allowBilling)).map((e=>[e,c[e].states||[]]))),Object.fromEntries(Object.keys(c).filter((e=>!0===c[e].allowShipping)).map((e=>[e,a[e]||""]))),Object.fromEntries(Object.keys(c).filter((e=>!0===c[e].allowShipping)).map((e=>[e,c[e].states||[]]))),Object.fromEntries(Object.keys(c).map((e=>[e,c[e].locale||[]]))),({imageUrl:t=`${l}/block-error.svg`,header:n=(0,r.__)("Oops!","woo-gutenberg-products-block"),text:o=(0,r.__)("There was an error loading the content.","woo-gutenberg-products-block"),errorMessage:s,errorMessagePrefix:i=(0,r.__)("Error:","woo-gutenberg-products-block"),button:a,showErrorBlock:c=!0})=>c?(0,e.createElement)("div",{className:"wc-block-error wc-block-components-error"},t&&(0,e.createElement)("img",{className:"wc-block-error__image wc-block-components-error__image",src:t,alt:""}),(0,e.createElement)("div",{className:"wc-block-error__content wc-block-components-error__content"},n&&(0,e.createElement)("p",{className:"wc-block-error__header wc-block-components-error__header"},n),o&&(0,e.createElement)("p",{className:"wc-block-error__text wc-block-components-error__text"},o),s&&(0,e.createElement)("p",{className:"wc-block-error__message wc-block-components-error__message"},i?i+" ":"",s),a&&(0,e.createElement)("p",{className:"wc-block-error__button wc-block-components-error__button"},a))):null);n(4578);class d extends e.Component{constructor(...e){var n,r,o;super(...e),n=this,o={errorMessage:"",hasError:!1},(r=function(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}(r="state"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o}static getDerivedStateFromError(t){return void 0!==t.statusText&&void 0!==t.status?{errorMessage:(0,e.createElement)(e.Fragment,null,(0,e.createElement)("strong",null,t.status),":Â ",t.statusText),hasError:!0}:{errorMessage:t.message,hasError:!0}}render(){const{header:t,imageUrl:n,showErrorMessage:r=!0,showErrorBlock:o=!0,text:s,errorMessagePrefix:i,renderError:l,button:a}=this.props,{errorMessage:c,hasError:d}=this.state;return d?"function"==typeof l?l({errorMessage:c}):(0,e.createElement)(u,{showErrorBlock:o,errorMessage:r?c:null,header:t,imageUrl:n,text:s,errorMessagePrefix:i,button:a}):this.props.children}}const p=d,m=[".wp-block-woocommerce-cart"],h=({Block:t,containers:n,getProps:r=(()=>({})),getErrorBoundaryProps:o=(()=>({}))})=>{0!==n.length&&Array.prototype.forEach.call(n,((n,s)=>{const i=r(n,s),l=o(n,s),a={...n.dataset,...i.attributes||{}};(({Block:t,container:n,attributes:r={},props:o={},errorBoundaryProps:s={}})=>{(0,e.render)((0,e.createElement)(p,{...s},(0,e.createElement)(e.Suspense,{fallback:(0,e.createElement)("div",{className:"wc-block-placeholder"})},t&&(0,e.createElement)(t,{...o,attributes:r}))),n,(()=>{n.classList&&n.classList.remove("is-loading")}))})({Block:t,container:n,props:i,attributes:a,errorBoundaryProps:l})}))},f=window.wp.isShallowEqual;var g=n.n(f);function v(t){const n=(0,e.useRef)(t);return g()(t,n.current)||(n.current=t),n.current}const b=window.wc.wcBlocksData,w=window.wp.data,y=(0,e.createContext)("page"),E=()=>(0,e.useContext)(y),k=(y.Provider,t=>{const n=E();t=t||n;const r=(0,w.useSelect)((e=>e(b.QUERY_STATE_STORE_KEY).getValueForQueryContext(t,void 0)),[t]),{setValueForQueryContext:o}=(0,w.useDispatch)(b.QUERY_STATE_STORE_KEY);return[r,(0,e.useCallback)((e=>{o(t,e)}),[t,o])]}),S=(t,n,r)=>{const o=E();r=r||o;const s=(0,w.useSelect)((e=>e(b.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,t,n)),[r,t]),{setQueryValue:i}=(0,w.useDispatch)(b.QUERY_STATE_STORE_KEY);return[s,(0,e.useCallback)((e=>{i(r,t,e)}),[r,t,i])]},_=t=>{const{namespace:n,resourceName:r,resourceValues:o=[],query:s={},shouldSelect:i=!0}=t;if(!n||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const l=(0,e.useRef)({results:[],isLoading:!0}),a=v(s),c=v(o),u=(()=>{const[,t]=(0,e.useState)();return(0,e.useCallback)((e=>{t((()=>{throw e}))}),[])})(),d=(0,w.useSelect)((e=>{if(!i)return null;const t=e(b.COLLECTIONS_STORE_KEY),o=[n,r,a,c],s=t.getCollectionError(...o);if(s){if(!(s instanceof Error))throw new Error("TypeError: `error` object is not an instance of Error constructor");u(s)}return{results:t.getCollection(...o),isLoading:!t.hasFinishedResolution("getCollection",o)}}),[n,r,c,a,i]);return null!==d&&(l.current=d),l.current},x=window.React;function T(e,t){return e===t}function C(e){return"function"==typeof e?function(){return e}:e}function I(e,t){return!(e=>null===e)(n=e)&&n instanceof Object&&n.constructor===Object&&t in e;var n}var L=function(e){return function(t,n,r){return e(t,n,r)*r}},A=function(e,t){if(e)throw Error("Invalid sort config: "+t)},R=function(e){var t=e||{},n=t.asc,r=t.desc,o=n?1:-1,s=n||r;return A(!s,"Expected `asc` or `desc` property"),A(n&&r,"Ambiguous object with `asc` and `desc` config properties"),{order:o,sortBy:s,comparer:e.comparer&&L(e.comparer)}};function P(e,t,n){if(void 0===e||!0===e)return function(e,r){return t(e,r,n)};if("string"==typeof e)return A(e.includes("."),"String syntax not allowed for nested properties."),function(r,o){return t(r[e],o[e],n)};if("function"==typeof e)return function(r,o){return t(e(r),e(o),n)};if(Array.isArray(e)){var r=function(e){return function t(n,r,o,s,i,l,a){var c,u;if("string"==typeof n)c=l[n],u=a[n];else{if("function"!=typeof n){var d=R(n);return t(d.sortBy,r,o,d.order,d.comparer||e,l,a)}c=n(l),u=n(a)}var p=i(c,u,s);return(0===p||null==c&&null==u)&&r.length>o?t(r[o],r,o+1,s,i,l,a):p}}(t);return function(o,s){return r(e[0],e,1,n,t,o,s)}}var o=R(e);return P(o.sortBy,o.comparer||t,o.order)}var O=function(e,t,n,r){return Array.isArray(t)?(Array.isArray(n)&&n.length<2&&(n=n[0]),t.sort(P(n,r,e))):t};function F(e){var t=L(e.comparer);return function(n){var r=Array.isArray(n)&&!e.inPlaceSorting?n.slice():n;return{asc:function(e){return O(1,r,e,t)},desc:function(e){return O(-1,r,e,t)},by:function(e){return O(1,r,e,t)}}}}var N=function(e,t,n){return null==e?n:null==t?-n:typeof e!=typeof t?typeof e<typeof t?-1:1:e<t?-1:e>t?1:0},M=F({comparer:N});F({comparer:N,inPlaceSorting:!0});const B=({queryAttribute:t,queryPrices:n,queryStock:r,queryRating:o,queryState:s,isEditor:i=!1})=>{let l=E();l=`${l}-collection-data`;const[a]=k(l),[c,u]=S("calculate_attribute_counts",[],l),[d,p]=S("calculate_price_range",null,l),[m,h]=S("calculate_stock_status_counts",null,l),[f,g]=S("calculate_rating_counts",null,l),b=v(t||{}),w=v(n),y=v(r),L=v(o);(0,e.useEffect)((()=>{"object"==typeof b&&Object.keys(b).length&&(c.find((e=>I(b,"taxonomy")&&e.taxonomy===b.taxonomy))||u([...c,b]))}),[b,c,u]),(0,e.useEffect)((()=>{d!==w&&void 0!==w&&p(w)}),[w,p,d]),(0,e.useEffect)((()=>{m!==y&&void 0!==y&&h(y)}),[y,h,m]),(0,e.useEffect)((()=>{f!==L&&void 0!==L&&g(L)}),[L,g,f]);const[A,R]=(0,e.useState)(i),[P]=(O=A,D=T,N=(0,x.useState)(C(O)),B=N[1],V=[N[0],(0,x.useCallback)((function(e){return B(C(e))}),[])],W=V[0],H=V[1],j=function(e,t,n){var r=this,o=(0,x.useRef)(null),s=(0,x.useRef)(0),i=(0,x.useRef)(null),l=(0,x.useRef)([]),a=(0,x.useRef)(),c=(0,x.useRef)(),u=(0,x.useRef)(e),d=(0,x.useRef)(!0);(0,x.useEffect)((function(){u.current=e}),[e]);var p=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var m=!!(n=n||{}).leading,h=!("trailing"in n)||!!n.trailing,f="maxWait"in n,g=f?Math.max(+n.maxWait||0,t):null;(0,x.useEffect)((function(){return d.current=!0,function(){d.current=!1}}),[]);var v=(0,x.useMemo)((function(){var e=function(e){var t=l.current,n=a.current;return l.current=a.current=null,s.current=e,c.current=u.current.apply(n,t)},n=function(e,t){p&&cancelAnimationFrame(i.current),i.current=p?requestAnimationFrame(e):setTimeout(e,t)},v=function(e){if(!d.current)return!1;var n=e-o.current;return!o.current||n>=t||n<0||f&&e-s.current>=g},b=function(t){return i.current=null,h&&l.current?e(t):(l.current=a.current=null,c.current)},w=function e(){var r=Date.now();if(v(r))return b(r);if(d.current){var i=t-(r-o.current),l=f?Math.min(i,g-(r-s.current)):i;n(e,l)}},y=function(){var u=Date.now(),p=v(u);if(l.current=[].slice.call(arguments),a.current=r,o.current=u,p){if(!i.current&&d.current)return s.current=o.current,n(w,t),m?e(o.current):c.current;if(f)return n(w,t),e(o.current)}return i.current||n(w,t),c.current};return y.cancel=function(){i.current&&(p?cancelAnimationFrame(i.current):clearTimeout(i.current)),s.current=0,l.current=o.current=a.current=i.current=null},y.isPending=function(){return!!i.current},y.flush=function(){return i.current?b(Date.now()):c.current},y}),[m,f,t,g,h,p]);return v}((0,x.useCallback)((function(e){return H(e)}),[H]),200,F),U=(0,x.useRef)(O),D(U.current,O)||(j(O),U.current=O),[W,j]);var O,F,N,B,D,V,W,H,j,U;A||R(!0);const z=(0,e.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=M(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(a)),[a]);return _({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...s,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...z},shouldSelect:P})};var D=n(4184),V=n.n(D);const W=({label:t,screenReaderLabel:n,wrapperElement:r,wrapperProps:o={}})=>{let s;const i=null!=t,l=null!=n;return!i&&l?(s=r||"span",o={...o,className:V()(o.className,"screen-reader-text")},(0,e.createElement)(s,{...o},n)):(s=r||e.Fragment,i&&l&&t!==n?(0,e.createElement)(s,{...o},(0,e.createElement)("span",{"aria-hidden":"true"},t),(0,e.createElement)("span",{className:"screen-reader-text"},n)):(0,e.createElement)(s,{...o},t))};n(1724);const H=({name:t,count:n})=>(0,e.createElement)(e.Fragment,null,t,null!==n&&Number.isFinite(n)&&(0,e.createElement)(W,{label:n.toString(),screenReaderLabel:(0,r.sprintf)(/* translators: %s number of products. */
(0,r._n)("%s product","%s products",n,"woo-gutenberg-products-block"),n),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}}));n(770);const j=({className:t,
/* translators: Reset button text for filters. */
label:n=(0,r.__)("Reset","woo-gutenberg-products-block"),onClick:o,screenReaderLabel:s=(0,r.__)("Reset filter","woo-gutenberg-products-block")})=>(0,e.createElement)("button",{className:V()("wc-block-components-filter-reset-button",t),onClick:o},(0,e.createElement)(W,{label:n,screenReaderLabel:s}));n(994);const U=({className:t,isLoading:n,disabled:o,
/* translators: Submit button text for filters. */
label:s=(0,r.__)("Apply","woo-gutenberg-products-block"),onClick:i,screenReaderLabel:l=(0,r.__)("Apply filter","woo-gutenberg-products-block")})=>(0,e.createElement)("button",{type:"submit",className:V()("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":n},t),disabled:o,onClick:i},(0,e.createElement)(W,{label:s,screenReaderLabel:l})),z=window.wp.htmlEntities,K=window.wp.url,q=e=>"boolean"==typeof e,$=e=>"string"==typeof e,G=e=>I(e,"attribute")&&I(e,"operator")&&I(e,"slug")&&"string"==typeof e.attribute&&"string"==typeof e.operator&&Array.isArray(e.slug)&&e.slug.every((e=>"string"==typeof e)),Q=function(t){let{icon:n,size:r=24,...o}=t;return(0,e.cloneElement)(n,{width:r,height:r,...o})},Y=window.wp.primitives,Z=(0,e.createElement)(Y.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(Y.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),X=(0,o.getSettingWithCoercion)("isRenderingPhpTemplate",!1,q),J="query_type_",ee="filter_";function te(e){X?((e=e.replace(/(?:query-(?:\d+-)?page=(\d+))|(?:page\/(\d+))/g,"")).endsWith("?")&&(e=e.slice(0,-1)),window.location.href=e):window.history.replaceState({},"",e)}const ne=window.lodash,re=window.wp.compose,oe=window.wp.keycodes,se=(0,e.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(Y.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}const le=window.wp.deprecated;var ae=n.n(le);const ce=window.wp.dom,ue=(0,e.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(Y.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));function de(e,t,n){const{defaultView:r}=t,{frameElement:o}=r;if(!o||t===n.ownerDocument)return e;const s=o.getBoundingClientRect();return new r.DOMRect(e.left+s.left,e.top+s.top,e.width,e.height)}let pe=0;function me(e){const t=document.scrollingElement||document.body;e&&(pe=t.scrollTop);const n=e?"add":"remove";t.classList[n]("lockscroll"),document.documentElement.classList[n]("lockscroll"),e||(t.scrollTop=pe)}let he=0;function fe(){return(0,e.useEffect)((()=>(0===he&&me(!0),++he,()=>{1===he&&me(!1),--he})),[]),null}window.wp.warning;const ge=(0,e.createContext)({slots:{},fills:{},registerSlot:()=>{"undefined"!=typeof process&&process.env},updateSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{}});function ve(t){const n=(0,e.useContext)(ge),r=n.slots[t]||{},o=n.fills[t],s=(0,e.useMemo)((()=>o||[]),[o]);return{...r,updateSlot:(0,e.useCallback)((e=>{n.updateSlot(t,e)}),[t,n.updateSlot]),unregisterSlot:(0,e.useCallback)((e=>{n.unregisterSlot(t,e)}),[t,n.unregisterSlot]),fills:s,registerFill:(0,e.useCallback)((e=>{n.registerFill(t,e)}),[t,n.registerFill]),unregisterFill:(0,e.useCallback)((e=>{n.unregisterFill(t,e)}),[t,n.unregisterFill])}}const be=(0,e.createContext)({registerSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{},getSlot:()=>{},getFills:()=>{},subscribe:()=>{}});function we({name:t,children:n,registerFill:r,unregisterFill:o}){const s=(t=>{const{getSlot:n,subscribe:r}=(0,e.useContext)(be),[o,s]=(0,e.useState)(n(t));return(0,e.useEffect)((()=>(s(n(t)),r((()=>{s(n(t))})))),[t]),o})(t),i=(0,e.useRef)({name:t,children:n});return(0,e.useLayoutEffect)((()=>(r(t,i.current),()=>o(t,i.current))),[]),(0,e.useLayoutEffect)((()=>{i.current.children=n,s&&s.forceUpdate()}),[n]),(0,e.useLayoutEffect)((()=>{t!==i.current.name&&(o(i.current.name,i.current),i.current.name=t,r(t,i.current))}),[t]),s&&s.node?((0,ne.isFunction)(n)&&(n=n(s.props.fillProps)),(0,e.createPortal)(n,s.node)):null}const ye=t=>(0,e.createElement)(be.Consumer,null,(({registerFill:n,unregisterFill:r})=>(0,e.createElement)(we,ie({},t,{registerFill:n,unregisterFill:r}))));class Ee extends e.Component{constructor(){super(...arguments),this.isUnmounted=!1,this.bindNode=this.bindNode.bind(this)}componentDidMount(){const{registerSlot:e}=this.props;e(this.props.name,this)}componentWillUnmount(){const{unregisterSlot:e}=this.props;this.isUnmounted=!0,e(this.props.name,this)}componentDidUpdate(e){const{name:t,unregisterSlot:n,registerSlot:r}=this.props;e.name!==t&&(n(e.name),r(t,this))}bindNode(e){this.node=e}forceUpdate(){this.isUnmounted||super.forceUpdate()}render(){const{children:t,name:n,fillProps:r={},getFills:o}=this.props,s=(0,ne.map)(o(n,this),(t=>{const n=(0,ne.isFunction)(t.children)?t.children(r):t.children;return e.Children.map(n,((t,n)=>{if(!t||(0,ne.isString)(t))return t;const r=t.key||n;return(0,e.cloneElement)(t,{key:r})}))})).filter((0,ne.negate)(e.isEmptyElement));return(0,e.createElement)(e.Fragment,null,(0,ne.isFunction)(t)?t(s):s)}}const ke=t=>(0,e.createElement)(be.Consumer,null,(({registerSlot:n,unregisterSlot:r,getFills:o})=>(0,e.createElement)(Ee,ie({},t,{registerSlot:n,unregisterSlot:r,getFills:o}))));function Se(){const[,t]=(0,e.useState)({}),n=(0,e.useRef)(!0);return(0,e.useEffect)((()=>()=>{n.current=!1}),[]),()=>{n.current&&t({})}}function _e({name:t,children:n}){const r=ve(t),o=(0,e.useRef)({rerender:Se()});return(0,e.useEffect)((()=>(r.registerFill(o),()=>{r.unregisterFill(o)})),[r.registerFill,r.unregisterFill]),r.ref&&r.ref.current?("function"==typeof n&&(n=n(r.fillProps)),(0,e.createPortal)(n,r.ref.current)):null}const xe=(0,e.forwardRef)((function({name:t,fillProps:n={},as:r="div",...o},s){const i=(0,e.useContext)(ge),l=(0,e.useRef)();return(0,e.useLayoutEffect)((()=>(i.registerSlot(t,l,n),()=>{i.unregisterSlot(t,l)})),[i.registerSlot,i.unregisterSlot,t]),(0,e.useLayoutEffect)((()=>{i.updateSlot(t,n)})),(0,e.createElement)(r,ie({ref:(0,re.useMergeRefs)([s,l])},o))}));function Te(t){return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(ye,t),(0,e.createElement)(_e,t))}const Ce=(0,e.forwardRef)((({bubblesVirtually:t,...n},r)=>t?(0,e.createElement)(xe,ie({},n,{ref:r})):(0,e.createElement)(ke,n)));function Ie(e){return"appear"===e?"top":"left"}const Le="Popover";function Ae(e,t){const{paddingTop:n,paddingBottom:r,paddingLeft:o,paddingRight:s}=(i=t).ownerDocument.defaultView.getComputedStyle(i);var i;const l=n?parseInt(n,10):0,a=r?parseInt(r,10):0,c=o?parseInt(o,10):0,u=s?parseInt(s,10):0;return{x:e.left+c,y:e.top+l,width:e.width-c-u,height:e.height-l-a,left:e.left+c,right:e.right-u,top:e.top+l,bottom:e.bottom-a}}function Re(e,t,n){n?e.getAttribute(t)!==n&&e.setAttribute(t,n):e.hasAttribute(t)&&e.removeAttribute(t)}function Pe(e,t,n=""){e.style[t]!==n&&(e.style[t]=n)}function Oe(e,t,n){n?e.classList.contains(t)||e.classList.add(t):e.classList.contains(t)&&e.classList.remove(t)}const Fe=(0,e.forwardRef)((({headerTitle:t,onClose:n,children:o,className:s,noArrow:i=!0,isAlternate:l,position:a="bottom right",range:c,focusOnMount:u="firstElement",anchorRef:d,shouldAnchorIncludePadding:p,anchorRect:m,getAnchorRect:h,expandOnMobile:f,animate:g=!0,onClickOutside:v,onFocusOutside:b,__unstableStickyBoundaryElement:w,__unstableSlotName:y=Le,__unstableObserveElement:E,__unstableBoundaryParent:k,__unstableForcePosition:S,__unstableForceXAlignment:_,...x},T)=>{const C=(0,e.useRef)(null),I=(0,e.useRef)(null),L=(0,e.useRef)(),A=(0,re.useViewportMatch)("medium","<"),[R,P]=(0,e.useState)(),O=ve(y),F=f&&A,[N,M]=(0,re.useResizeObserver)();i=F||i,(0,e.useLayoutEffect)((()=>{if(F)return Oe(L.current,"is-without-arrow",i),Oe(L.current,"is-alternate",l),Re(L.current,"data-x-axis"),Re(L.current,"data-y-axis"),Pe(L.current,"top"),Pe(L.current,"left"),Pe(I.current,"maxHeight"),void Pe(I.current,"maxWidth");const e=()=>{if(!L.current||!I.current)return;let e=function(e,t,n,r=!1,o,s){if(t)return t;if(n){if(!e.current)return;const t=n(e.current);return de(t,t.ownerDocument||e.current.ownerDocument,s)}if(!1!==r){if(!(r&&window.Range&&window.Element&&window.DOMRect))return;if("function"==typeof(null==r?void 0:r.cloneRange))return de((0,ce.getRectangleFromRange)(r),r.endContainer.ownerDocument,s);if("function"==typeof(null==r?void 0:r.getBoundingClientRect)){const e=de(r.getBoundingClientRect(),r.ownerDocument,s);return o?e:Ae(e,r)}const{top:e,bottom:t}=r,n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),l=de(new window.DOMRect(n.left,n.top,n.width,i.bottom-n.top),e.ownerDocument,s);return o?l:Ae(l,r)}if(!e.current)return;const{parentNode:i}=e.current,l=i.getBoundingClientRect();return o?l:Ae(l,i)}(C,m,h,d,p,L.current);if(!e)return;const{offsetParent:t,ownerDocument:n}=L.current;let o,s=0;if(t&&t!==n.body){const n=t.getBoundingClientRect();s=n.top,e=new window.DOMRect(e.left-n.left,e.top-n.top,e.width,e.height)}var c;k&&(o=null===(c=L.current.closest(".popover-slot"))||void 0===c?void 0:c.parentNode);const u=M.height?M:I.current.getBoundingClientRect(),{popoverTop:f,popoverLeft:g,xAxis:v,yAxis:b,contentHeight:y,contentWidth:E}=function(e,t,n="top",o,s,i,l,a,c){const[u,d="center",p]=n.split(" "),m=function(e,t,n,r,o,s,i,l){const{height:a}=t;if(o){const t=o.getBoundingClientRect().top+a-i;if(e.top<=t)return{yAxis:n,popoverTop:Math.min(e.bottom,t)}}let c=e.top+e.height/2;"bottom"===r?c=e.bottom:"top"===r&&(c=e.top);const u={popoverTop:c,contentHeight:(c-a/2>0?a/2:c)+(c+a/2>window.innerHeight?window.innerHeight-c:a/2)},d={popoverTop:e.top,contentHeight:e.top-10-a>0?a:e.top-10},p={popoverTop:e.bottom,contentHeight:e.bottom+10+a>window.innerHeight?window.innerHeight-10-e.bottom:a};let m,h=n,f=null;if(!o&&!l)if("middle"===n&&u.contentHeight===a)h="middle";else if("top"===n&&d.contentHeight===a)h="top";else if("bottom"===n&&p.contentHeight===a)h="bottom";else{h=d.contentHeight>p.contentHeight?"top":"bottom";const e="top"===h?d.contentHeight:p.contentHeight;f=e!==a?e:null}return m="middle"===h?u.popoverTop:"top"===h?d.popoverTop:p.popoverTop,{yAxis:h,popoverTop:m,contentHeight:f}}(e,t,u,p,o,0,i,a),h=function(e,t,n,o,s,i,l,a,c){const{width:u}=t;"left"===n&&(0,r.isRTL)()?n="right":"right"===n&&(0,r.isRTL)()&&(n="left"),"left"===o&&(0,r.isRTL)()?o="right":"right"===o&&(0,r.isRTL)()&&(o="left");const d=Math.round(e.left+e.width/2),p={popoverLeft:d,contentWidth:(d-u/2>0?u/2:d)+(d+u/2>window.innerWidth?window.innerWidth-d:u/2)};let m=e.left;"right"===o?m=e.right:"middle"===i||c||(m=d);let h=e.right;"left"===o?h=e.left:"middle"===i||c||(h=d);const f={popoverLeft:m,contentWidth:m-u>0?u:m},g={popoverLeft:h,contentWidth:h+u>window.innerWidth?window.innerWidth-h:u};let v,b=n,w=null;if(!s&&!a)if("center"===n&&p.contentWidth===u)b="center";else if("left"===n&&f.contentWidth===u)b="left";else if("right"===n&&g.contentWidth===u)b="right";else{b=f.contentWidth>g.contentWidth?"left":"right";const e="left"===b?f.contentWidth:g.contentWidth;u>window.innerWidth&&(w=window.innerWidth),e!==u&&(b="center",p.popoverLeft=window.innerWidth/2)}if(v="center"===b?p.popoverLeft:"left"===b?f.popoverLeft:g.popoverLeft,l){const e=l.getBoundingClientRect();v=Math.min(v,e.right-u),(0,r.isRTL)()||(v=Math.max(v,0))}return{xAxis:b,popoverLeft:v,contentWidth:w}}(e,t,d,p,o,m.yAxis,l,a,c);return{...h,...m}}(e,u,a,w,L.current,s,o,S,_);"number"==typeof f&&"number"==typeof g&&(Pe(L.current,"top",f+"px"),Pe(L.current,"left",g+"px")),Oe(L.current,"is-without-arrow",i||"center"===v&&"middle"===b),Oe(L.current,"is-alternate",l),Re(L.current,"data-x-axis",v),Re(L.current,"data-y-axis",b),Pe(I.current,"maxHeight","number"==typeof y?y+"px":""),Pe(I.current,"maxWidth","number"==typeof E?E+"px":""),P(({left:"right",right:"left"}[v]||"center")+" "+({top:"bottom",bottom:"top"}[b]||"middle"))};e();const{ownerDocument:t}=L.current,{defaultView:n}=t,o=n.setInterval(e,500);let s;const c=()=>{n.cancelAnimationFrame(s),s=n.requestAnimationFrame(e)};n.addEventListener("click",c),n.addEventListener("resize",e),n.addEventListener("scroll",e,!0);const u=function(e){if(e)return e.endContainer?e.endContainer.ownerDocument:e.top?e.top.ownerDocument:e.ownerDocument}(d);let f;return u&&u!==t&&(u.defaultView.addEventListener("resize",e),u.defaultView.addEventListener("scroll",e,!0)),E&&(f=new n.MutationObserver(e),f.observe(E,{attributes:!0})),()=>{n.clearInterval(o),n.removeEventListener("resize",e),n.removeEventListener("scroll",e,!0),n.removeEventListener("click",c),n.cancelAnimationFrame(s),u&&u!==t&&(u.defaultView.removeEventListener("resize",e),u.defaultView.removeEventListener("scroll",e,!0)),f&&f.disconnect()}}),[F,m,h,d,p,a,M,w,E,k]);const B=(e,t)=>{if("focus-outside"===e&&b)b(t);else if("focus-outside"===e&&v){const e=new window.MouseEvent("click");Object.defineProperty(e,"target",{get:()=>t.relatedTarget}),ae()("Popover onClickOutside prop",{since:"5.3",alternative:"onFocusOutside"}),v(e)}else n&&n()},[D,W]=(0,re.__experimentalUseDialog)({focusOnMount:u,__unstableOnClose:B,onClose:B}),H=(0,re.useMergeRefs)([L,D,T]),j=Boolean(g&&R)&&function(e){if("loading"===e.type)return V()("components-animate__loading");const{type:t,origin:n=Ie(t)}=e;if("appear"===t){const[e,t="center"]=n.split(" ");return V()("components-animate__appear",{["is-from-"+t]:"center"!==t,["is-from-"+e]:"middle"!==e})}return"slide-in"===t?V()("components-animate__slide-in","is-from-"+n):void 0}({type:"appear",origin:R});let U=(0,e.createElement)("div",ie({className:V()("components-popover",s,j,{"is-expanded":F,"is-without-arrow":i,"is-alternate":l})},x,{ref:H},W,{tabIndex:"-1"}),F&&(0,e.createElement)(fe,null),F&&(0,e.createElement)("div",{className:"components-popover__header"},(0,e.createElement)("span",{className:"components-popover__header-title"},t),(0,e.createElement)(qe,{className:"components-popover__close",icon:ue,onClick:n})),(0,e.createElement)("div",{ref:I,className:"components-popover__content"},(0,e.createElement)("div",{style:{position:"relative"}},N,o)));return O.ref&&(U=(0,e.createElement)(Te,{name:y},U)),d||m?U:(0,e.createElement)("span",{ref:C},U)}));Fe.Slot=(0,e.forwardRef)((function({name:t=Le},n){return(0,e.createElement)(Ce,{bubblesVirtually:!0,name:t,className:"popover-slot",ref:n})}));const Ne=Fe,Me=function({shortcut:t,className:n}){if(!t)return null;let r,o;return(0,ne.isString)(t)&&(r=t),(0,ne.isObject)(t)&&(r=t.display,o=t.ariaLabel),(0,e.createElement)("span",{className:n,"aria-label":o},r)},Be=(0,e.createElement)("div",{className:"event-catcher"}),De=({eventHandlers:t,child:n,childrenWithPopover:r})=>(0,e.cloneElement)((0,e.createElement)("span",{className:"disabled-element-wrapper"},(0,e.cloneElement)(Be,t),(0,e.cloneElement)(n,{children:r}),","),t),Ve=({child:t,eventHandlers:n,childrenWithPopover:r})=>(0,e.cloneElement)(t,{...n,children:r}),We=(t,n,r)=>{if(1!==e.Children.count(t))return;const o=e.Children.only(t);"function"==typeof o.props[n]&&o.props[n](r)},He=function({children:t,position:n,text:r,shortcut:o}){const[s,i]=(0,e.useState)(!1),[l,a]=(0,e.useState)(!1),c=(0,re.useDebounce)(a,700),u=e=>{We(t,"onMouseDown",e),document.addEventListener("mouseup",m),i(!0)},d=e=>{We(t,"onMouseUp",e),document.removeEventListener("mouseup",m),i(!1)},p=e=>"mouseUp"===e?d:"mouseDown"===e?u:void 0,m=p("mouseUp"),h=(e,n)=>r=>{if(We(t,e,r),r.currentTarget.disabled)return;if("focus"===r.type&&s)return;c.cancel();const o=(0,ne.includes)(["focus","mouseenter"],r.type);o!==l&&(n?c(o):a(o))},f=()=>{c.cancel(),document.removeEventListener("mouseup",m)};if((0,e.useEffect)((()=>f),[]),1!==e.Children.count(t))return t;const g={onMouseEnter:h("onMouseEnter",!0),onMouseLeave:h("onMouseLeave"),onClick:h("onClick"),onFocus:h("onFocus"),onBlur:h("onBlur"),onMouseDown:p("mouseDown")},v=e.Children.only(t),{children:b,disabled:w}=v.props,y=w?De:Ve,E=(({grandchildren:t,isOver:n,position:r,text:o,shortcut:s})=>(0,e.concatChildren)(t,n&&(0,e.createElement)(Ne,{focusOnMount:!1,position:r,className:"components-tooltip","aria-hidden":"true",animate:!1,noArrow:!0},o,(0,e.createElement)(Me,{className:"components-tooltip__shortcut",shortcut:s}))))({grandchildren:b,isOver:l,position:n,text:r,shortcut:o});return y({child:v,eventHandlers:g,childrenWithPopover:E})},je=function({icon:t,className:n,...r}){const o=["dashicon","dashicons","dashicons-"+t,n].filter(Boolean).join(" ");return(0,e.createElement)("span",ie({className:o},r))},Ue=function({icon:t=null,size:n=24,...r}){if("string"==typeof t)return(0,e.createElement)(je,ie({icon:t},r));if((0,e.isValidElement)(t)&&je===t.type)return(0,e.cloneElement)(t,{...r});if("function"==typeof t)return t.prototype instanceof e.Component?(0,e.createElement)(t,{size:n,...r}):t({size:n,...r});if(t&&("svg"===t.type||t.type===Y.SVG)){const o={width:n,height:n,...t.props,...r};return(0,e.createElement)(Y.SVG,o)}return(0,e.isValidElement)(t)?(0,e.cloneElement)(t,{size:n,...r}):t},ze=(0,e.forwardRef)((function({as:t="div",className:n,...r},o){return function({as:t="div",...n}){return"function"==typeof n.children?n.children(n):(0,e.createElement)(t,n)}({as:t,className:V()("components-visually-hidden",n),...r,ref:o})})),Ke=["onMouseDown","onClick"],qe=(0,e.forwardRef)((function(t,n){const{href:r,target:o,isSmall:s,isPressed:i,isBusy:l,isDestructive:a,className:c,disabled:u,icon:d,iconPosition:p="left",iconSize:m,showTooltip:h,tooltipPosition:f,shortcut:g,label:v,children:b,text:w,variant:y,__experimentalIsFocusable:E,describedBy:k,...S}=function({isDefault:e,isPrimary:t,isSecondary:n,isTertiary:r,isLink:o,variant:s,...i}){let l=s;var a,c,u,d,p;return t&&(null!==(a=l)&&void 0!==a||(l="primary")),r&&(null!==(c=l)&&void 0!==c||(l="tertiary")),n&&(null!==(u=l)&&void 0!==u||(l="secondary")),e&&(ae()("Button isDefault prop",{since:"5.4",alternative:'variant="secondary"'}),null!==(d=l)&&void 0!==d||(l="secondary")),o&&(null!==(p=l)&&void 0!==p||(l="link")),{...i,variant:l}}(t),_=V()("components-button",c,{"is-secondary":"secondary"===y,"is-primary":"primary"===y,"is-small":s,"is-tertiary":"tertiary"===y,"is-pressed":i,"is-busy":l,"is-link":"link"===y,"is-destructive":a,"has-text":!!d&&!!b,"has-icon":!!d}),x=u&&!E,T=void 0===r||x?"button":"a",C="a"===T?{href:r,target:o}:{type:"button",disabled:x,"aria-pressed":i};if(u&&E){C["aria-disabled"]=!0;for(const e of Ke)S[e]=e=>{e.stopPropagation(),e.preventDefault()}}const I=!x&&(h&&v||g||!!v&&(!b||(0,ne.isArray)(b)&&!b.length)&&!1!==h),L=k?(0,ne.uniqueId)():null,A=S["aria-describedby"]||L,R=(0,e.createElement)(T,ie({},C,S,{className:_,"aria-label":S["aria-label"]||v,"aria-describedby":A,ref:n}),d&&"left"===p&&(0,e.createElement)(Ue,{icon:d,size:m}),w&&(0,e.createElement)(e.Fragment,null,w),d&&"right"===p&&(0,e.createElement)(Ue,{icon:d,size:m}),b);return I?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(He,{text:k||v,shortcut:g,position:f},R),k&&(0,e.createElement)(ze,null,(0,e.createElement)("span",{id:L},k))):(0,e.createElement)(e.Fragment,null,R,k&&(0,e.createElement)(ze,null,(0,e.createElement)("span",{id:L},k)))}));function $e({value:t,status:n,title:o,displayTransform:s,isBorderless:i=!1,disabled:l=!1,onClickRemove:a=ne.noop,onMouseEnter:c,onMouseLeave:u,messages:d,termPosition:p,termsCount:m}){const h=(0,re.useInstanceId)($e),f=V()("components-form-token-field__token",{"is-error":"error"===n,"is-success":"success"===n,"is-validating":"validating"===n,"is-borderless":i,"is-disabled":l}),g=s(t),v=(0,r.sprintf)(
/* translators: 1: term name, 2: term position in a set of terms, 3: total term set count. */
(0,r.__)("%1$s (%2$s of %3$s)"),g,p,m);return(0,e.createElement)("span",{className:f,onMouseEnter:c,onMouseLeave:u,title:o},(0,e.createElement)("span",{className:"components-form-token-field__token-text",id:`components-form-token-field__token-text-${h}`},(0,e.createElement)(ze,{as:"span"},v),(0,e.createElement)("span",{"aria-hidden":"true"},g)),(0,e.createElement)(qe,{className:"components-form-token-field__remove-token",icon:se,onClick:!l&&(()=>a({value:t})),label:d.remove,"aria-describedby":`components-form-token-field__token-text-${h}`}))}class Ge extends e.Component{constructor(){super(...arguments),this.onChange=this.onChange.bind(this),this.bindInput=this.bindInput.bind(this)}focus(){this.input.focus()}hasFocus(){return this.input===this.input.ownerDocument.activeElement}bindInput(e){this.input=e}onChange(e){this.props.onChange({value:e.target.value})}render(){const{value:t,isExpanded:n,instanceId:r,selectedSuggestionIndex:o,className:s,...i}=this.props,l=t?t.length+1:0;return(0,e.createElement)("input",ie({ref:this.bindInput,id:`components-form-token-input-${r}`,type:"text"},i,{value:t||"",onChange:this.onChange,size:l,className:V()(s,"components-form-token-field__input"),autoComplete:"off",role:"combobox","aria-expanded":n,"aria-autocomplete":"list","aria-owns":n?`components-form-token-suggestions-${r}`:void 0,"aria-activedescendant":-1!==o?`components-form-token-suggestions-${r}-${o}`:void 0,"aria-describedby":`components-form-token-suggestions-howto-${r}`}))}}const Qe=Ge;var Ye=n(4979),Ze=n.n(Ye);class Xe extends e.Component{constructor(){super(...arguments),this.handleMouseDown=this.handleMouseDown.bind(this),this.bindList=this.bindList.bind(this)}componentDidUpdate(){this.props.selectedIndex>-1&&this.props.scrollIntoView&&this.list.children[this.props.selectedIndex]&&(this.scrollingIntoView=!0,Ze()(this.list.children[this.props.selectedIndex],this.list,{onlyScrollIfNeeded:!0}),this.props.setTimeout((()=>{this.scrollingIntoView=!1}),100))}bindList(e){this.list=e}handleHover(e){return()=>{this.scrollingIntoView||this.props.onHover(e)}}handleClick(e){return()=>{this.props.onSelect(e)}}handleMouseDown(e){e.preventDefault()}computeSuggestionMatch(e){const t=this.props.displayTransform(this.props.match||"").toLocaleLowerCase();if(0===t.length)return null;const n=(e=this.props.displayTransform(e)).toLocaleLowerCase().indexOf(t);return{suggestionBeforeMatch:e.substring(0,n),suggestionMatch:e.substring(n,n+t.length),suggestionAfterMatch:e.substring(n+t.length)}}render(){return(0,e.createElement)("ul",{ref:this.bindList,className:"components-form-token-field__suggestions-list",id:`components-form-token-suggestions-${this.props.instanceId}`,role:"listbox"},(0,ne.map)(this.props.suggestions,((t,n)=>{const r=this.computeSuggestionMatch(t),o=V()("components-form-token-field__suggestion",{"is-selected":n===this.props.selectedIndex});return(0,e.createElement)("li",{id:`components-form-token-suggestions-${this.props.instanceId}-${n}`,role:"option",className:o,key:null!=t&&t.value?t.value:this.props.displayTransform(t),onMouseDown:this.handleMouseDown,onClick:this.handleClick(t),onMouseEnter:this.handleHover(t),"aria-selected":n===this.props.selectedIndex},r?(0,e.createElement)("span",{"aria-label":this.props.displayTransform(t)},r.suggestionBeforeMatch,(0,e.createElement)("strong",{className:"components-form-token-field__suggestion-match"},r.suggestionMatch),r.suggestionAfterMatch):this.props.displayTransform(t))})))}}Xe.defaultProps={match:"",onHover:()=>{},onSelect:()=>{},suggestions:Object.freeze([])};const Je=(0,re.withSafeTimeout)(Xe),et=window.wp.a11y,tt=(0,re.createHigherOrderComponent)((t=>n=>(0,e.createElement)(t,ie({},n,{speak:et.speak,debouncedSpeak:(0,re.useDebounce)(et.speak,500)}))),"withSpokenMessages"),nt={incompleteTokenValue:"",inputOffsetFromEnd:0,isActive:!1,isExpanded:!1,selectedSuggestionIndex:-1,selectedSuggestionScroll:!1};class rt extends e.Component{constructor(){super(...arguments),this.state=nt,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.deleteTokenBeforeInput=this.deleteTokenBeforeInput.bind(this),this.deleteTokenAfterInput=this.deleteTokenAfterInput.bind(this),this.addCurrentToken=this.addCurrentToken.bind(this),this.onContainerTouched=this.onContainerTouched.bind(this),this.renderToken=this.renderToken.bind(this),this.onTokenClickRemove=this.onTokenClickRemove.bind(this),this.onSuggestionHovered=this.onSuggestionHovered.bind(this),this.onSuggestionSelected=this.onSuggestionSelected.bind(this),this.onInputChange=this.onInputChange.bind(this),this.bindInput=this.bindInput.bind(this),this.bindTokensAndInput=this.bindTokensAndInput.bind(this),this.updateSuggestions=this.updateSuggestions.bind(this)}componentDidUpdate(e){this.state.isActive&&!this.input.hasFocus()&&this.input.focus();const{suggestions:t,value:n}=this.props,r=!g()(t,e.suggestions);(r||n!==e.value)&&this.updateSuggestions(r)}static getDerivedStateFromProps(e,t){return e.disabled&&t.isActive?{isActive:!1,incompleteTokenValue:""}:null}bindInput(e){this.input=e}bindTokensAndInput(e){this.tokensAndInput=e}onFocus(e){const{__experimentalExpandOnFocus:t}=this.props;this.input.hasFocus()||e.target===this.tokensAndInput?this.setState({isActive:!0,isExpanded:!!t||this.state.isExpanded}):this.setState({isActive:!1}),"function"==typeof this.props.onFocus&&this.props.onFocus(e)}onBlur(){this.inputHasValidValue()?this.setState({isActive:!1}):this.setState(nt)}onKeyDown(e){let t=!1;switch(e.keyCode){case oe.BACKSPACE:t=this.handleDeleteKey(this.deleteTokenBeforeInput);break;case oe.ENTER:t=this.addCurrentToken();break;case oe.LEFT:t=this.handleLeftArrowKey();break;case oe.UP:t=this.handleUpArrowKey();break;case oe.RIGHT:t=this.handleRightArrowKey();break;case oe.DOWN:t=this.handleDownArrowKey();break;case oe.DELETE:t=this.handleDeleteKey(this.deleteTokenAfterInput);break;case oe.SPACE:this.props.tokenizeOnSpace&&(t=this.addCurrentToken());break;case oe.ESCAPE:t=this.handleEscapeKey(e),e.stopPropagation()}t&&e.preventDefault()}onKeyPress(e){let t=!1;44===e.charCode&&(t=this.handleCommaKey()),t&&e.preventDefault()}onContainerTouched(e){e.target===this.tokensAndInput&&this.state.isActive&&e.preventDefault()}onTokenClickRemove(e){this.deleteToken(e.value),this.input.focus()}onSuggestionHovered(e){const t=this.getMatchingSuggestions().indexOf(e);t>=0&&this.setState({selectedSuggestionIndex:t,selectedSuggestionScroll:!1})}onSuggestionSelected(e){this.addNewToken(e)}onInputChange(e){const t=e.value,n=this.props.tokenizeOnSpace?/[ ,\t]+/:/[,\t]+/,r=t.split(n),o=(0,ne.last)(r)||"";r.length>1&&this.addNewTokens(r.slice(0,-1)),this.setState({incompleteTokenValue:o},this.updateSuggestions),this.props.onInputChange(o)}handleDeleteKey(e){let t=!1;return this.input.hasFocus()&&this.isInputEmpty()&&(e(),t=!0),t}handleLeftArrowKey(){let e=!1;return this.isInputEmpty()&&(this.moveInputBeforePreviousToken(),e=!0),e}handleRightArrowKey(){let e=!1;return this.isInputEmpty()&&(this.moveInputAfterNextToken(),e=!0),e}handleUpArrowKey(){return this.setState(((e,t)=>({selectedSuggestionIndex:(0===e.selectedSuggestionIndex?this.getMatchingSuggestions(e.incompleteTokenValue,t.suggestions,t.value,t.maxSuggestions,t.saveTransform).length:e.selectedSuggestionIndex)-1,selectedSuggestionScroll:!0}))),!0}handleDownArrowKey(){return this.setState(((e,t)=>({selectedSuggestionIndex:(e.selectedSuggestionIndex+1)%this.getMatchingSuggestions(e.incompleteTokenValue,t.suggestions,t.value,t.maxSuggestions,t.saveTransform).length,selectedSuggestionScroll:!0}))),!0}handleEscapeKey(e){return this.setState({incompleteTokenValue:e.target.value,isExpanded:!1,selectedSuggestionIndex:-1,selectedSuggestionScroll:!1}),!0}handleCommaKey(){return this.inputHasValidValue()&&this.addNewToken(this.state.incompleteTokenValue),!0}moveInputToIndex(e){this.setState(((t,n)=>({inputOffsetFromEnd:n.value.length-Math.max(e,-1)-1})))}moveInputBeforePreviousToken(){this.setState(((e,t)=>({inputOffsetFromEnd:Math.min(e.inputOffsetFromEnd+1,t.value.length)})))}moveInputAfterNextToken(){this.setState((e=>({inputOffsetFromEnd:Math.max(e.inputOffsetFromEnd-1,0)})))}deleteTokenBeforeInput(){const e=this.getIndexOfInput()-1;e>-1&&this.deleteToken(this.props.value[e])}deleteTokenAfterInput(){const e=this.getIndexOfInput();e<this.props.value.length&&(this.deleteToken(this.props.value[e]),this.moveInputToIndex(e))}addCurrentToken(){let e=!1;const t=this.getSelectedSuggestion();return t?(this.addNewToken(t),e=!0):this.inputHasValidValue()&&(this.addNewToken(this.state.incompleteTokenValue),e=!0),e}addNewTokens(e){const t=(0,ne.uniq)(e.map(this.props.saveTransform).filter(Boolean).filter((e=>!this.valueContainsToken(e))));if(t.length>0){const e=(0,ne.clone)(this.props.value);e.splice.apply(e,[this.getIndexOfInput(),0].concat(t)),this.props.onChange(e)}}addNewToken(e){const{__experimentalExpandOnFocus:t,__experimentalValidateInput:n}=this.props;n(e)?(this.addNewTokens([e]),this.props.speak(this.props.messages.added,"assertive"),this.setState({incompleteTokenValue:"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1,isExpanded:!t}),this.state.isActive&&this.input.focus()):this.props.speak(this.props.messages.__experimentalInvalid,"assertive")}deleteToken(e){const t=this.props.value.filter((t=>this.getTokenValue(t)!==this.getTokenValue(e)));this.props.onChange(t),this.props.speak(this.props.messages.removed,"assertive")}getTokenValue(e){return"object"==typeof e?e.value:e}getMatchingSuggestions(e=this.state.incompleteTokenValue,t=this.props.suggestions,n=this.props.value,r=this.props.maxSuggestions,o=this.props.saveTransform){let s=o(e);const i=[],l=[];return 0===s.length?t=(0,ne.difference)(t,n):(s=s.toLocaleLowerCase(),(0,ne.each)(t,(e=>{const t=e.toLocaleLowerCase().indexOf(s);-1===n.indexOf(e)&&(0===t?i.push(e):t>0&&l.push(e))})),t=i.concat(l)),(0,ne.take)(t,r)}getSelectedSuggestion(){if(-1!==this.state.selectedSuggestionIndex)return this.getMatchingSuggestions()[this.state.selectedSuggestionIndex]}valueContainsToken(e){return(0,ne.some)(this.props.value,(t=>this.getTokenValue(e)===this.getTokenValue(t)))}getIndexOfInput(){return this.props.value.length-this.state.inputOffsetFromEnd}isInputEmpty(){return 0===this.state.incompleteTokenValue.length}inputHasValidValue(){return this.props.saveTransform(this.state.incompleteTokenValue).length>0}updateSuggestions(e=!0){const{__experimentalExpandOnFocus:t}=this.props,{incompleteTokenValue:n}=this.state,o=n.trim().length>1,s=this.getMatchingSuggestions(n),i=s.length>0,l={isExpanded:t||o&&i};if(e&&(l.selectedSuggestionIndex=-1,l.selectedSuggestionScroll=!1),this.setState(l),o){const{debouncedSpeak:e}=this.props;e(i?(0,r.sprintf)(
/* translators: %d: number of results. */
(0,r._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",s.length),s.length):(0,r.__)("No results."),"assertive")}}renderTokensAndInput(){const e=(0,ne.map)(this.props.value,this.renderToken);return e.splice(this.getIndexOfInput(),0,this.renderInput()),e}renderToken(t,n,r){const o=this.getTokenValue(t),s=t.status?t.status:void 0,i=n+1,l=r.length;return(0,e.createElement)($e,{key:"token-"+o,value:o,status:s,title:t.title,displayTransform:this.props.displayTransform,onClickRemove:this.onTokenClickRemove,isBorderless:t.isBorderless||this.props.isBorderless,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,disabled:"error"!==s&&this.props.disabled,messages:this.props.messages,termsCount:l,termPosition:i})}renderInput(){const{autoCapitalize:t,autoComplete:n,maxLength:r,placeholder:o,value:s,instanceId:i}=this.props;let l={instanceId:i,autoCapitalize:t,autoComplete:n,placeholder:0===s.length?o:"",ref:this.bindInput,key:"input",disabled:this.props.disabled,value:this.state.incompleteTokenValue,onBlur:this.onBlur,isExpanded:this.state.isExpanded,selectedSuggestionIndex:this.state.selectedSuggestionIndex};return r&&s.length>=r||(l={...l,onChange:this.onInputChange}),(0,e.createElement)(Qe,l)}render(){const{disabled:t,label:n=(0,r.__)("Add item"),instanceId:o,className:s,__experimentalShowHowTo:i}=this.props,{isExpanded:l}=this.state,a=V()(s,"components-form-token-field__input-container",{"is-active":this.state.isActive,"is-disabled":t});let c={className:"components-form-token-field",tabIndex:"-1"};const u=this.getMatchingSuggestions();return t||(c=Object.assign({},c,{onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onFocus:this.onFocus})),(0,e.createElement)("div",c,(0,e.createElement)("label",{htmlFor:`components-form-token-input-${o}`,className:"components-form-token-field__label"},n),(0,e.createElement)("div",{ref:this.bindTokensAndInput,className:a,tabIndex:"-1",onMouseDown:this.onContainerTouched,onTouchStart:this.onContainerTouched},this.renderTokensAndInput(),l&&(0,e.createElement)(Je,{instanceId:o,match:this.props.saveTransform(this.state.incompleteTokenValue),displayTransform:this.props.displayTransform,suggestions:u,selectedIndex:this.state.selectedSuggestionIndex,scrollIntoView:this.state.selectedSuggestionScroll,onHover:this.onSuggestionHovered,onSelect:this.onSuggestionSelected})),i&&(0,e.createElement)("p",{id:`components-form-token-suggestions-howto-${o}`,className:"components-form-token-field__help"},this.props.tokenizeOnSpace?(0,r.__)("Separate with commas, spaces, or the Enter key."):(0,r.__)("Separate with commas or the Enter key.")))}}rt.defaultProps={suggestions:Object.freeze([]),maxSuggestions:100,value:Object.freeze([]),displayTransform:ne.identity,saveTransform:e=>e.trim(),onChange:()=>{},onInputChange:()=>{},isBorderless:!1,disabled:!1,tokenizeOnSpace:!1,messages:{added:(0,r.__)("Item added."),removed:(0,r.__)("Item removed."),remove:(0,r.__)("Remove item"),__experimentalInvalid:(0,r.__)("Invalid item")},__experimentalExpandOnFocus:!1,__experimentalValidateInput:()=>!0,__experimentalShowHowTo:!0};const ot=tt((0,re.withInstanceId)(rt));n(230);const st=({className:t,style:n,suggestions:r,multiple:o=!0,saveTransform:s=(e=>e.trim().replace(/\s/g,"-")),messages:i={},validateInput:l=(e=>r.includes(e)),label:a="",...c})=>(0,e.createElement)("div",{className:V()("wc-blocks-components-form-token-field-wrapper",t,{"single-selection":!o}),style:n},(0,e.createElement)(ot,{label:a,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__experimentalValidateInput:l,saveTransform:s,maxLength:o?void 0:1,suggestions:r,messages:i,...c}));n(7732);const it=({children:t})=>(0,e.createElement)("div",{className:"wc-block-filter-title-placeholder"},t),lt=(0,o.getSetting)("attributes",[]).reduce(((e,t)=>{const n=(r=t)&&r.attribute_name?{id:parseInt(r.attribute_id,10),name:r.attribute_name,taxonomy:"pa_"+r.attribute_name,label:r.attribute_label}:null;var r;return n&&n.id&&e.push(n),e}),[]),at=(e=[],t,n,r=[],o="in")=>{if(!n||!n.taxonomy)return[];const s=e.filter((e=>e.attribute!==n.taxonomy));return 0===r.length?t(s):(s.push({attribute:n.taxonomy,operator:o,slug:r.map((({slug:e})=>e)).sort()}),t(M(s).asc("attribute"))),s},ct=[{value:"preview-1",formattedValue:"preview-1",name:"Blue",label:(0,e.createElement)(H,{name:"Blue",count:3}),textLabel:"Blue (3)"},{value:"preview-2",formattedValue:"preview-2",name:"Green",label:(0,e.createElement)(H,{name:"Green",count:3}),textLabel:"Green (3)"},{value:"preview-3",formattedValue:"preview-3",name:"Red",label:(0,e.createElement)(H,{name:"Red",count:2}),textLabel:"Red (2)"}],ut={count:0,has_archives:!0,id:0,label:"Preview",name:"preview",order:"menu_order",parent:0,taxonomy:"preview",type:""};n(3057);const dt=JSON.parse('{"Y4":{"hd":{"Z":"or"},"D8":{"Z":3},"PW":{"Z":"list"},"lr":{"Z":"multiple"}}}');function pt(){return Math.floor(Math.random()*Date.now())}const mt=e=>e.replace("pa_",""),ht=(e,t=[])=>{const n={};t.forEach((e=>{const{attribute:t,slug:r,operator:o}=e,s=mt(t),i=r.join(","),l=`${J}${s}`,a="in"===o?"or":"and";n[`${ee}${s}`]=i,n[l]=a}));const r=(0,K.removeQueryArgs)(e,...Object.keys(n));return(0,K.addQueryArgs)(r,n)},ft=e=>{if(e){const n=(t=`filter_${e.name}`,window?(0,K.getQueryArg)(window.location.href,t):null);return("string"==typeof n?n.split(","):[]).map((e=>encodeURIComponent(e).toLowerCase()))}var t;return[]},gt=e=>e.trim().replace(/\s/g,"-").replace(/_/g,"-").replace(/-+/g,"-").replace(/[^a-zA-Z0-9-]/g,""),vt=window.wc.blocksCheckout;n(6574);const bt=({className:t,onChange:n,options:o=[],checked:s=[],isLoading:i=!1,isDisabled:l=!1,limit:a=10})=>{const[c,u]=(0,e.useState)(!1),d=(0,e.useMemo)((()=>[...Array(5)].map(((t,n)=>(0,e.createElement)("li",{key:n,style:{width:Math.floor(75*Math.random())+25+"%"}})))),[]),p=(0,e.useMemo)((()=>{const t=o.length-a;return!c&&(0,e.createElement)("li",{key:"show-more",className:"show-more"},(0,e.createElement)("button",{onClick:()=>{u(!0)},"aria-expanded":!1,"aria-label":(0,r.sprintf)(/* translators: %s is referring the remaining count of options */
(0,r._n)("Show %s more option","Show %s more options",t,"woo-gutenberg-products-block"),t)},(0,r.sprintf)(/* translators: %s number of options to reveal. */
(0,r._n)("Show %s more","Show %s more",t,"woo-gutenberg-products-block"),t)))}),[o,a,c]),m=(0,e.useMemo)((()=>c&&(0,e.createElement)("li",{key:"show-less",className:"show-less"},(0,e.createElement)("button",{onClick:()=>{u(!1)},"aria-expanded":!0,"aria-label":(0,r.__)("Show less options","woo-gutenberg-products-block")},(0,r.__)("Show less","woo-gutenberg-products-block")))),[c]),h=(0,e.useMemo)((()=>{const t=o.length>a+5;return(0,e.createElement)(e.Fragment,null,o.map(((r,o)=>(0,e.createElement)(e.Fragment,{key:r.value},(0,e.createElement)("li",{...t&&!c&&o>=a&&{hidden:!0}},(0,e.createElement)(vt.CheckboxControl,{id:r.value,className:"wc-block-checkbox-list__checkbox",label:r.label,checked:s.includes(r.value),onChange:()=>{n(r.value)},disabled:l})),t&&o===a-1&&p))),t&&m)}),[o,n,s,c,a,m,p,l]),f=V()("wc-block-checkbox-list","wc-block-components-checkbox-list",{"is-loading":i},t);return(0,e.createElement)("ul",{className:f},i?d:h)},wt=({isLoading:t=!1,options:n,checked:r,onChange:o})=>t?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",{className:"is-loading"}),(0,e.createElement)("span",{className:"is-loading"})):(0,e.createElement)(bt,{className:"wc-block-attribute-filter-list",options:n,checked:r,onChange:o,isLoading:t,isDisabled:t}),yt=(0,e.createContext)({});(e=>{const t=document.body.querySelectorAll(m.join(",")),{Block:n,getProps:r,getErrorBoundaryProps:o,selector:s}=e;(({Block:e,getProps:t,getErrorBoundaryProps:n,selector:r,wrappers:o})=>{const s=document.body.querySelectorAll(r);o&&o.length>0&&Array.prototype.filter.call(s,(e=>!((e,t)=>Array.prototype.some.call(t,(t=>t.contains(e)&&!t.isSameNode(e))))(e,o))),h({Block:e,containers:s,getProps:t,getErrorBoundaryProps:n})})({Block:n,getProps:r,getErrorBoundaryProps:o,selector:s,wrappers:t}),Array.prototype.forEach.call(t,(t=>{t.addEventListener("wc-blocks_render_blocks_frontend",(()=>{(({Block:e,getProps:t,getErrorBoundaryProps:n,selector:r,wrapper:o})=>{const s=o.querySelectorAll(r);h({Block:e,containers:s,getProps:t,getErrorBoundaryProps:n})})({...e,wrapper:t})}))}))})({selector:".wp-block-woocommerce-attribute-filter",Block:({attributes:t,isEditor:n=!1,getNotice:s=(()=>null)})=>{const i=(0,o.getSettingWithCoercion)("hasFilterableProducts",!1,q),l=(0,o.getSettingWithCoercion)("isRenderingPhpTemplate",!1,q),a=(0,o.getSettingWithCoercion)("pageUrl",window.location.href,$),[c,u]=(0,e.useState)(!1),d=t.isPreview&&!t.attributeId?ut:(e=>{if(e)return lt.find((t=>t.id===e))})(t.attributeId),p=(0,e.useMemo)((()=>ft(d)),[d]),[m,h]=(0,e.useState)(p),[f,b]=(0,e.useState)(pt()),[w,y]=(0,e.useState)(t.isPreview&&!t.attributeId?ct:[]),[E]=k(),[x,T]=S("attributes",[]),{results:C,isLoading:L}=_({namespace:"/wc/store/v1",resourceName:"products/attributes/terms",resourceValues:[(null==d?void 0:d.id)||0],shouldSelect:t.attributeId>0}),{results:A,isLoading:R}=B({queryAttribute:{taxonomy:(null==d?void 0:d.taxonomy)||"",queryType:t.queryType},queryState:{...E},isEditor:n}),P=(0,e.useCallback)((e=>I(A,"attribute_counts")&&Array.isArray(A.attribute_counts)?A.attribute_counts.find((({term:t})=>t===e)):null),[A]);(0,e.useEffect)((()=>{if(L||R)return;if(!Array.isArray(C))return;const n=C.map((n=>{const r=P(n.id);if(!(r||m.includes(n.slug)||(o=n.slug,null!=E&&E.attributes&&E.attributes.some((({attribute:e,slug:t=[]})=>e===(null==d?void 0:d.taxonomy)&&t.includes(o))))))return null;var o;const s=r?r.count:0;return{formattedValue:gt(n.slug),value:n.slug,name:(0,z.decodeEntities)(n.name),label:(0,e.createElement)(H,{name:(0,z.decodeEntities)(n.name),count:t.showCounts?s:null}),textLabel:t.showCounts?`${(0,z.decodeEntities)(n.name)} (${s})`:(0,z.decodeEntities)(n.name)}})).filter((e=>!!e));y(n),b(pt())}),[null==d?void 0:d.taxonomy,C,L,t.showCounts,R,P,m,E.attributes]);const O=(0,e.useCallback)((e=>Array.isArray(C)?C.reduce(((t,n)=>(e.includes(n.slug)&&t.push(n),t)),[]):[]),[C]),F=(0,e.useCallback)(((e,t=!1)=>{if(e=e.map((e=>({...e,slug:e.slug.map((e=>decodeURIComponent(e)))}))),t){if(null==d||!d.taxonomy)return;const t=Object.keys((0,K.getQueryArgs)(window.location.href)),n=mt(d.taxonomy),r=t.reduce(((e,t)=>t.includes(J+n)||t.includes(ee+n)?(0,K.removeQueryArgs)(e,t):e),window.location.href);te(ht(r,e))}else{const t=ht(a,e);((e,t)=>{const n=Object.entries(t).reduce(((e,[t,n])=>t.includes("query_type")?e:{...e,[t]:n}),{});return Object.entries(n).reduce(((t,[n,r])=>e[n]===r&&t),!0)})((0,K.getQueryArgs)(window.location.href),(0,K.getQueryArgs)(t))||te(t)}}),[a,null==d?void 0:d.taxonomy]),N=e=>{const n=at(x,T,d,O(e),"or"===t.queryType?"in":"and");F(n,0===e.length)},M=(0,e.useCallback)(((e,r=!1)=>{n||(h(e),!r&&t.showFilterButton||at(x,T,d,O(e),"or"===t.queryType?"in":"and"))}),[n,h,x,T,d,O,t.queryType,t.showFilterButton]),D=v((0,e.useMemo)((()=>{return e=x,Array.isArray(e)&&e.every(G)?x.filter((({attribute:e})=>e===(null==d?void 0:d.taxonomy))).flatMap((({slug:e})=>e)):[];var e}),[x,null==d?void 0:d.taxonomy])),W=function(t,n){const r=(0,e.useRef)();return(0,e.useEffect)((()=>{r.current===t||(r.current=t)}),[t,n]),r.current}(D);(0,e.useEffect)((()=>{!W||g()(W,D)||g()(m,D)||M(D)}),[m,D,W,M]);const Y="single"!==t.selectType,X=(0,e.useCallback)((e=>{const t=m.includes(e);let n;Y?(n=m.filter((t=>t!==e)),t||(n.push(e),n.sort())):n=t?[]:[e],M(n)}),[m,Y,M]);(0,e.useEffect)((()=>{d&&!t.showFilterButton&&((({currentCheckedFilters:e,hasSetFilterDefaultsFromUrl:t})=>t&&0===e.length)({currentCheckedFilters:m,hasSetFilterDefaultsFromUrl:c})?F(x,!0):F(x,!1))}),[c,F,x,d,m,t.showFilterButton]),(0,e.useEffect)((()=>{if(!c&&!L)return p.length>0?(u(!0),void M(p,!0)):void(l||u(!0))}),[d,c,L,M,p,l]);const ne=(()=>{const{wrapper:t}=(0,e.useContext)(yt);return e=>{t&&t.current&&(t.current.hidden=!e)}})();if(!i)return ne(!1),null;if(!d)return n?s("noAttributes"):(ne(!1),null);if(0===w.length&&!L&&n)return s("noProducts");const re=`h${t.headingLevel}`,oe=!t.isPreview&&L,se=!t.isPreview&&R,ie=(oe||se)&&0===w.length;if(!ie&&0===w.length)return ne(!1),null;const le=Y?!ie&&m.length<w.length:!ie&&0===m.length,ae=(0,e.createElement)(re,{className:"wc-block-attribute-filter__title"},t.heading),ce=ie?(0,e.createElement)(it,null,ae):ae;return ne(!0),(0,e.createElement)(e.Fragment,null,!n&&t.heading&&ce,(0,e.createElement)("div",{className:V()("wc-block-attribute-filter",`style-${t.displayStyle}`)},"dropdown"===t.displayStyle?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(st,{key:f,className:V()({"single-selection":!Y,"is-loading":ie}),suggestions:w.filter((e=>!m.includes(e.value))).map((e=>e.formattedValue)),disabled:ie,placeholder:(0,r.sprintf)(/* translators: %s attribute name. */
(0,r.__)("Select %s","woo-gutenberg-products-block"),d.label),onChange:e=>{!Y&&e.length>1&&(e=[e[e.length-1]]);const t=[e=e.map((e=>{const t=w.find((t=>t.formattedValue===e));return t?t.value:e})),m].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));if(1===t.length)return X(t[0]);const n=[m,e].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));1===n.length&&X(n[0])},value:m,displayTransform:e=>{const t=w.find((t=>[t.value,t.formattedValue].includes(e)));return t?t.textLabel:e},saveTransform:gt,messages:{added:(0,r.sprintf)(/* translators: %s is the attribute label. */
(0,r.__)("%s filter added.","woo-gutenberg-products-block"),d.label),removed:(0,r.sprintf)(/* translators: %s is the attribute label. */
(0,r.__)("%s filter removed.","woo-gutenberg-products-block"),d.label),remove:(0,r.sprintf)(/* translators: %s is the attribute label. */
(0,r.__)("Remove %s filter.","woo-gutenberg-products-block"),d.label.toLocaleLowerCase()),__experimentalInvalid:(0,r.sprintf)(/* translators: %s is the attribute label. */
(0,r.__)("Invalid %s filter.","woo-gutenberg-products-block"),d.label.toLocaleLowerCase())}}),le&&(0,e.createElement)(Q,{icon:Z,size:30})):(0,e.createElement)(wt,{options:w,checked:m,onChange:X,isLoading:ie,isDisabled:ie})),(0,e.createElement)("div",{className:"wc-block-attribute-filter__actions"},(m.length>0||n)&&!ie&&(0,e.createElement)(j,{onClick:()=>{h([]),b(pt()),c&&N([])},screenReaderLabel:(0,r.__)("Reset attribute filter","woo-gutenberg-products-block")}),t.showFilterButton&&(0,e.createElement)(U,{className:"wc-block-attribute-filter__button",isLoading:ie,disabled:(()=>{if(oe||se)return!0;const e=ft(d);return e.length===m.length&&m.every((t=>e.includes(t)))})(),onClick:()=>N(m)})))},getProps:e=>{return{isEditor:!1,attributes:(t=e.dataset,{className:$(null==t?void 0:t.className)?t.className:"",attributeId:parseInt($(null==t?void 0:t.attributeId)?t.attributeId:"0",10),showCounts:"true"===(null==t?void 0:t.showCounts),queryType:$(null==t?void 0:t.queryType)&&t.queryType||dt.Y4.hd.Z,heading:$(null==t?void 0:t.heading)?t.heading:"",headingLevel:$(null==t?void 0:t.headingLevel)&&parseInt(t.headingLevel,10)||dt.Y4.D8.Z,displayStyle:$(null==t?void 0:t.displayStyle)&&t.displayStyle||dt.Y4.PW.Z,showFilterButton:"true"===(null==t?void 0:t.showFilterButton),selectType:$(null==t?void 0:t.selectType)&&t.selectType||dt.Y4.lr.Z,isPreview:!1})};var t}})})()})();