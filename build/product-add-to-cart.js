(self.webpackChunkwebpackWcBlocksJsonp=self.webpackChunkwebpackWcBlocksJsonp||[]).push([[5800],{6638:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s={showFormElements:{type:"boolean",default:!1},productId:{type:"number",default:0}}},386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>He});var s=r(9307),o=r(4184),a=r.n(o),n=r(5736),c=r(9075),i=r(6576),l=r(9818),u=r(4801);const d={PRISTINE:"pristine",IDLE:"idle",DISABLED:"disabled",PROCESSING:"processing",BEFORE_PROCESSING:"before_processing",AFTER_PROCESSING:"after_processing"},p={status:d.PRISTINE,hasError:!1,quantity:0,processingResponse:null,requestParams:{}},E={SET_PRISTINE:"set_pristine",SET_IDLE:"set_idle",SET_DISABLED:"set_disabled",SET_PROCESSING:"set_processing",SET_BEFORE_PROCESSING:"set_before_processing",SET_AFTER_PROCESSING:"set_after_processing",SET_PROCESSING_RESPONSE:"set_processing_response",SET_HAS_ERROR:"set_has_error",SET_NO_ERROR:"set_no_error",SET_QUANTITY:"set_quantity",SET_REQUEST_PARAMS:"set_request_params"},{SET_PRISTINE:m,SET_IDLE:_,SET_DISABLED:h,SET_PROCESSING:b,SET_BEFORE_PROCESSING:S,SET_AFTER_PROCESSING:g,SET_PROCESSING_RESPONSE:v,SET_HAS_ERROR:f,SET_NO_ERROR:R,SET_QUANTITY:C,SET_REQUEST_PARAMS:y}=E,T=()=>({type:_}),w=(e=!0)=>({type:e?f:R}),{SET_PRISTINE:A,SET_IDLE:P,SET_DISABLED:O,SET_PROCESSING:I,SET_BEFORE_PROCESSING:k,SET_AFTER_PROCESSING:N,SET_PROCESSING_RESPONSE:D,SET_HAS_ERROR:L,SET_NO_ERROR:x,SET_QUANTITY:F,SET_REQUEST_PARAMS:B}=E,{PRISTINE:M,IDLE:q,DISABLED:j,PROCESSING:Q,BEFORE_PROCESSING:Y,AFTER_PROCESSING:G}=d,V=(e=p,{quantity:t,type:r,data:s})=>{let o;switch(r){case A:o=p;break;case P:o=e.status!==q?{...e,status:q}:e;break;case O:o=e.status!==j?{...e,status:j}:e;break;case F:o=t!==e.quantity?{...e,quantity:t}:e;break;case B:o={...e,requestParams:{...e.requestParams,...s}};break;case D:o={...e,processingResponse:s};break;case I:o=e.status!==Q?{...e,status:Q,hasError:!1}:e,o=!1===o.hasError?o:{...o,hasError:!1};break;case k:o=e.status!==Y?{...e,status:Y,hasError:!1}:e;break;case N:o=e.status!==G?{...e,status:G}:e;break;case L:o=e.hasError?e:{...e,hasError:!0},o=e.status===Q||e.status===Y?{...o,status:q}:o;break;case x:o=e.hasError?{...e,hasError:!1}:e}return o!==e&&r!==A&&o.status===M&&(o.status=q),o};let K=function(e){return e.ADD_EVENT_CALLBACK="add_event_callback",e.REMOVE_EVENT_CALLBACK="remove_event_callback",e}({});const H={},W=(e=H,{type:t,eventType:r,id:s,callback:o,priority:a})=>{const n=e.hasOwnProperty(r)?new Map(e[r]):new Map;switch(t){case K.ADD_EVENT_CALLBACK:return n.set(s,{priority:a,callback:o}),{...e,[r]:n};case K.REMOVE_EVENT_CALLBACK:return n.delete(s),{...e,[r]:n}}},U=(e,t)=>(r,s=10)=>{const o=((e,t,r=10)=>({id:Math.floor(Math.random()*Date.now()).toString(),type:K.ADD_EVENT_CALLBACK,eventType:e,callback:t,priority:r}))(e,r,s);return t(o),()=>{var r;t((r=e,{id:o.id,type:K.REMOVE_EVENT_CALLBACK,eventType:r}))}},Z="add_to_cart_before_processing",$="add_to_cart_after_processing_with_success",X="add_to_cart_after_processing_with_error",J=e=>({onAddToCartAfterProcessingWithSuccess:U($,e),onAddToCartProcessingWithError:U(X,e),onAddToCartBeforeProcessing:U(Z,e)});var z=r(7884);const ee=(e,t)=>e[t]?Array.from(e[t].values()).sort(((e,t)=>e.priority-t.priority)):[];let te=function(e){return e.SUCCESS="success",e.FAIL="failure",e.ERROR="error",e}({});const re=(e,t)=>(0,z.Kn)(e)&&"type"in e&&e.type===t,se=e=>re(e,te.ERROR),oe=e=>re(e,te.FAIL),ae=e=>(0,z.Kn)(e)&&(0,z.$n)(e,"type"),ne=async(e,t,r)=>{const s=[],o=ee(e,t);for(const e of o)try{const t=await Promise.resolve(e.callback(r));if(!ae(t))continue;if(!t.hasOwnProperty("type"))throw new Error("Returned objects from event emitter observers must return an object with a type property");if(se(t)||oe(t))return s.push(t),s;s.push(t)}catch(e){return console.error(e),s.push({type:te.ERROR}),s}return s},ce=(0,s.createContext)({product:{},productType:"simple",productIsPurchasable:!0,productHasOptions:!1,supportsFormElements:!0,showFormElements:!1,quantity:0,minQuantity:1,maxQuantity:99,requestParams:{},isIdle:!1,isDisabled:!1,isProcessing:!1,isBeforeProcessing:!1,isAfterProcessing:!1,hasError:!1,eventRegistration:{onAddToCartAfterProcessingWithSuccess:e=>{},onAddToCartAfterProcessingWithError:e=>{},onAddToCartBeforeProcessing:e=>{}},dispatchActions:{resetForm:()=>{},submitForm:()=>{},setQuantity:e=>{},setHasError:e=>{},setAfterProcessing:e=>{},setRequestParams:e=>{}}}),ie=()=>(0,s.useContext)(ce),le=({children:e,product:t,showFormElements:r})=>{var o,a,E,_;const[f,R]=(0,s.useReducer)(V,p),[A,P]=(0,s.useReducer)(W,{}),O=(0,c.s)(A),{createErrorNotice:I}=(0,l.useDispatch)("core/notices"),{setValidationErrors:k}=(0,l.useDispatch)(u.VALIDATION_STORE_KEY),N=(0,s.useMemo)((()=>({onAddToCartAfterProcessingWithSuccess:J(P).onAddToCartAfterProcessingWithSuccess,onAddToCartAfterProcessingWithError:J(P).onAddToCartAfterProcessingWithError,onAddToCartBeforeProcessing:J(P).onAddToCartBeforeProcessing})),[P]),D=(0,s.useMemo)((()=>({resetForm:()=>{R({type:m})},submitForm:()=>{R({type:S})},setQuantity:e=>{R((e=>({type:C,quantity:e}))(e))},setHasError:e=>{R(w(e))},setRequestParams:e=>{R((e=>({type:y,data:e}))(e))},setAfterProcessing:e=>{R({type:v,data:e}),R({type:g})}})),[]);(0,s.useEffect)((()=>{const e=f.status,r=!t.id||!(0,i.L)(t);e!==d.DISABLED||r?e!==d.DISABLED&&r&&R({type:h}):R(T())}),[f.status,t,R]),(0,s.useEffect)((()=>{f.status===d.BEFORE_PROCESSING&&(((e,t)=>{const r=(0,l.select)("core/notices").getNotices(t),{removeNotice:s}=(0,l.dispatch)("core/notices");r.filter((e=>"error"===e.status)).forEach((e=>s(e.id,t)))})(0,"wc/add-to-cart"),(async(e,t,r)=>{const s=ee(e,t),o=[];for(const e of s)try{const t=await Promise.resolve(e.callback(r));"object"==typeof t&&o.push(t)}catch(e){console.error(e)}return!o.length||o})(O,Z,{}).then((e=>{!0!==e?(Array.isArray(e)&&e.forEach((({errorMessage:e,validationErrors:t})=>{e&&I(e,{context:"wc/add-to-cart"}),t&&k(t)})),R(T())):R({type:b})})))}),[f.status,k,I,R,O,null==t?void 0:t.id]),(0,s.useEffect)((()=>{if(f.status===d.AFTER_PROCESSING){const e={processingResponse:f.processingResponse},r=e=>{let t=!1;return e.forEach((e=>{const{message:r,messageContext:s}=e;(se(e)||oe(e))&&r&&(t=!0,I(r,s?{context:s}:void 0))})),t};if(f.hasError)return void ne(O,X,e).then((s=>{if(!r(s)){var o;const r=(null===(o=e.processingResponse)||void 0===o?void 0:o.message)||(0,n.__)("Something went wrong. Please contact us for assistance.","woo-gutenberg-products-block");I(r,{id:"add-to-cart",context:`woocommerce/single-product/${(null==t?void 0:t.id)||0}`})}R(T())}));ne(O,$,e).then((e=>{r(e)?R(w(!0)):R(T())}))}}),[f.status,f.hasError,f.processingResponse,D,I,O,null==t?void 0:t.id]);const L=(0,i.K)(t),x={product:t,productType:t.type||"simple",productIsPurchasable:(0,i.L)(t),productHasOptions:t.has_options||!1,supportsFormElements:L,showFormElements:r&&L,quantity:f.quantity||(null==t||null===(o=t.add_to_cart)||void 0===o?void 0:o.minimum)||1,minQuantity:(null==t||null===(a=t.add_to_cart)||void 0===a?void 0:a.minimum)||1,maxQuantity:(null==t||null===(E=t.add_to_cart)||void 0===E?void 0:E.maximum)||99,multipleOf:(null==t||null===(_=t.add_to_cart)||void 0===_?void 0:_.multiple_of)||1,requestParams:f.requestParams,isIdle:f.status===d.IDLE,isDisabled:f.status===d.DISABLED,isProcessing:f.status===d.PROCESSING,isBeforeProcessing:f.status===d.BEFORE_PROCESSING,isAfterProcessing:f.status===d.AFTER_PROCESSING,hasError:f.hasError,eventRegistration:N,dispatchActions:D};return(0,s.createElement)(ce.Provider,{value:x},e)};var ue=r(6989),de=r.n(ue),pe=r(2629),Ee=r(9456),me=r(9816);const _e=()=>{const{dispatchActions:e,product:t,quantity:r,eventRegistration:o,hasError:a,isProcessing:c,requestParams:i}=ie(),{showAllValidationErrors:d}=(0,l.useDispatch)(u.VALIDATION_STORE_KEY),p=(0,l.useSelect)((e=>e(u.VALIDATION_STORE_KEY).hasValidationErrors)),{createErrorNotice:E,removeNotice:m}=(0,l.useDispatch)("core/notices"),{receiveCart:_}=(0,me.b)(),[h,b]=(0,s.useState)(!1),S=!a&&c,g=(0,s.useCallback)((()=>!p()||(d(),{type:"error"})),[p,d]);(0,s.useEffect)((()=>{const e=o.onAddToCartBeforeProcessing(g,0);return()=>{e()}}),[o,g]);const v=(0,s.useCallback)((()=>{b(!0),m("add-to-cart",`woocommerce/single-product/${(null==t?void 0:t.id)||0}`);const s={id:t.id||0,quantity:r,...i};de()({path:"/wc/store/v1/cart/add-item",method:"POST",data:s,cache:"no-store",parse:!1}).then((r=>{de().setNonce(r.headers),r.json().then((function(s){r.ok?_(s):(s.body&&s.body.message?E((0,pe.decodeEntities)(s.body.message),{id:"add-to-cart",context:`woocommerce/single-product/${(null==t?void 0:t.id)||0}`}):E((0,n.__)("Something went wrong. Please contact us for assistance.","woo-gutenberg-products-block"),{id:"add-to-cart",context:`woocommerce/single-product/${(null==t?void 0:t.id)||0}`}),e.setHasError()),(0,Ee.Q9)({preserveCartData:!0}),e.setAfterProcessing(s),b(!1)}))})).catch((t=>{t.json().then((function(t){var r;null!==(r=t.data)&&void 0!==r&&r.cart&&_(t.data.cart),e.setHasError(),e.setAfterProcessing(t),b(!1)}))}))}),[t,E,m,_,e,r,i]);return(0,s.useEffect)((()=>{S&&!h&&v()}),[S,v,h]),null},he=({children:e,product:t,showFormElements:r})=>(0,s.createElement)(le,{product:t,showFormElements:r},e,(0,s.createElement)(_e,null));var be=r(2864),Se=r(51),ge=r(721),ve=(r(6684),r(9884));r(5589);const fe=()=>(0,s.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"});r(5482);const Re=({className:e,showSpinner:t=!1,children:r,variant:o="contained",...n})=>{const c=a()("wc-block-components-button","wp-element-button",e,o,{"wc-block-components-button--loading":t});return(0,s.createElement)(ve.Z,{className:c,...n},t&&(0,s.createElement)(fe,null),(0,s.createElement)("span",{className:"wc-block-components-button__text"},r))};var Ce=r(1984),ye=r(8184),Te=r(5918),we=r(3775);const Ae=({className:e,href:t,text:r,onClick:o})=>(0,s.createElement)(Re,{className:e,href:t,onClick:o,rel:"nofollow"},r),Pe=({className:e,quantityInCart:t,isProcessing:r,isDisabled:o,isDone:a,onClick:c})=>(0,s.createElement)(Re,{className:e,disabled:o,showSpinner:r,onClick:c},a&&t>0?(0,n.sprintf)(/* translators: %s number of products in cart. */
(0,n._n)("%d in cart","%d in cart",t,"woo-gutenberg-products-block"),t):(0,n.__)("Add to cart","woo-gutenberg-products-block"),!!a&&(0,s.createElement)(Ce.Z,{icon:ye.Z})),Oe=()=>{const{showFormElements:e,productIsPurchasable:t,productHasOptions:r,product:o,productType:a,isDisabled:c,isProcessing:i,eventRegistration:l,hasError:u,dispatchActions:d}=ie(),{parentName:p}=(0,be.useInnerBlockLayoutContext)(),{dispatchStoreEvent:E}=(0,Te.n)(),{cartQuantity:m}=(0,we.c)(o.id||0),[_,h]=(0,s.useState)(!1),b=o.add_to_cart||{url:"",text:""};return(0,s.useEffect)((()=>{const e=l.onAddToCartAfterProcessingWithSuccess((()=>(u||h(!0),!0)),0);return()=>{e()}}),[l,u]),(e||!r&&"simple"===a)&&t?(0,s.createElement)(Pe,{className:"wc-block-components-product-add-to-cart-button",quantityInCart:m,isDisabled:c,isProcessing:i,isDone:_,onClick:()=>{d.submitForm(`woocommerce/single-product/${(null==o?void 0:o.id)||0}`),E("cart-add-item",{product:o,listName:p})}}):(0,s.createElement)(Ae,{className:"wc-block-components-product-add-to-cart-button",href:b.url,text:b.text||(0,n.__)("View Product","woo-gutenberg-products-block"),onClick:()=>{E("product-view-link",{product:o,listName:p})}})};var Ie=r(4697);const ke=({disabled:e,min:t,max:r,step:o=1,value:a,onChange:n})=>{const c=void 0!==r,i=(0,Ie.y1)((e=>{let s=e;c&&(s=Math.min(s,Math.floor(r/o)*o)),s=Math.max(s,Math.ceil(t/o)*o),s=Math.floor(s/o)*o,s!==e&&(null==n||n(s))}),300);return(0,s.createElement)("input",{className:"wc-block-components-product-add-to-cart-quantity",type:"number",value:a,min:t,max:r,step:o,hidden:1===r,disabled:e,onChange:e=>{null==n||n(e.target.value),i(Number(e.target.value))}})},Ne=({reason:e=(0,n.__)("Sorry, this product cannot be purchased.","woo-gutenberg-products-block")})=>(0,s.createElement)("div",{className:"wc-block-components-product-add-to-cart-unavailable"},e),De=()=>{const{product:e,quantity:t,minQuantity:r,maxQuantity:o,multipleOf:a,dispatchActions:c,isDisabled:i}=ie();return e.id&&!e.is_purchasable?(0,s.createElement)(Ne,null):e.id&&!e.is_in_stock?(0,s.createElement)(Ne,{reason:(0,n.__)("This product is currently out of stock and cannot be purchased.","woo-gutenberg-products-block")}):(0,s.createElement)(s.Fragment,null,(0,s.createElement)(ke,{value:t,min:r,max:o,step:a,disabled:i,onChange:c.setQuantity}),(0,s.createElement)(Oe,null))};r(461);var Le=r(3854),xe=r(3554);const Fe={value:"",label:(0,n.__)("Select an option","woo-gutenberg-products-block")},Be=({attributeName:e,options:t=[],value:r="",onChange:o=(()=>{}),errorMessage:c=(0,n.__)("Please select a value.","woo-gutenberg-products-block")})=>{const i=e,{setValidationErrors:d,clearValidationError:p}=(0,l.useDispatch)(u.VALIDATION_STORE_KEY),{error:E}=(0,l.useSelect)((e=>({error:e(u.VALIDATION_STORE_KEY).getValidationError(i)||{}})));return(0,s.useEffect)((()=>{r?p(i):d({[i]:{message:c,hidden:!0}})}),[r,i,c,p,d]),(0,s.useEffect)((()=>()=>{p(i)}),[i,p]),(0,s.createElement)("div",{className:"wc-block-components-product-add-to-cart-attribute-picker__container"},(0,s.createElement)(Le.Z,{label:(0,pe.decodeEntities)(e),value:r||"",options:[Fe,...t],onChange:o,required:!0,className:a()("wc-block-components-product-add-to-cart-attribute-picker__select",{"has-error":(null==E?void 0:E.message)&&!(null!=E&&E.hidden)})}),(0,s.createElement)(xe.ValidationInputError,{propertyName:i,elementId:i}))};var Me=r(8916);const qe=(e,t,r)=>{const s=Object.values(t).map((({id:e})=>e));if(Object.values(r).every((e=>""===e)))return s;const o=Object.keys(e);return s.filter((e=>o.every((s=>{const o=r[s]||"",a=t["id:"+e].attributes[s];return""===o||null===a||a===o}))))},je=({attributes:e,variationAttributes:t,setRequestParams:r})=>{const o=(0,c.s)(e),a=(0,c.s)(t),[n,i]=(0,s.useState)(0),[l,u]=(0,s.useState)({}),[d,p]=(0,s.useState)(!1),E=(0,s.useMemo)((()=>((e,t,r)=>{const s={},o=Object.keys(e),a=Object.values(r).filter(Boolean).length>0;return o.forEach((o=>{const n=e[o],c={...r,[o]:null},i=a?qe(e,t,c):null,l=null!==i?i.map((e=>t["id:"+e].attributes[o])):null;s[o]=((e,t=null)=>Object.values(e).map((({name:e,slug:r})=>null===t||t.includes(null)||t.includes(r)?{value:r,label:(0,pe.decodeEntities)(e)}:null)).filter(Boolean))(n.terms,l)})),s})(o,a,l)),[l,o,a]);return(0,s.useEffect)((()=>{if(!d){const t=(e=>(0,z.Kn)(e)?0===Object.keys(e).length?{}:Object.values(e).reduce(((e,t)=>{const r=t.terms.filter((e=>e.default));var s;return r.length>0&&(e[t.name]=null===(s=r[0])||void 0===s?void 0:s.slug),e}),{}):{})(e);t&&u({...t}),p(!0)}}),[l,e,d]),(0,s.useEffect)((()=>{Object.values(l).filter((e=>""!==e)).length===Object.keys(o).length?i(((e,t,r)=>qe(e,t,r)[0]||0)(o,a,l)):n>0&&i(0)}),[l,n,o,a]),(0,s.useEffect)((()=>{r({id:n,variation:Object.keys(l).map((e=>({attribute:e,value:l[e]})))})}),[r,n,l]),(0,s.createElement)("div",{className:"wc-block-components-product-add-to-cart-attribute-picker"},Object.keys(o).map((e=>(0,s.createElement)(Be,{key:e,attributeName:e,options:E[e].filter(Boolean),value:l[e],onChange:t=>{u({...l,[e]:t})}}))))},Qe=({dispatchers:e,product:t})=>{const r=(e=>e?(0,Me.V)(Object.values(e).filter((({has_variations:e})=>e)),"name"):{})(t.attributes),o=(e=>{if(!e)return{};const t={};return e.forEach((({id:e,attributes:r})=>{t[`id:${e}`]={id:e,attributes:r.reduce(((e,{name:t,value:r})=>(e[t]=r,e)),{})}})),t})(t.variations);return 0===Object.keys(r).length||0===Object.keys(o).length?null:(0,s.createElement)(je,{attributes:r,variationAttributes:o,setRequestParams:e.setRequestParams})},Ye=()=>{const{product:e,quantity:t,minQuantity:r,maxQuantity:o,multipleOf:a,dispatchActions:c,isDisabled:i}=ie();return e.id&&!e.is_purchasable?(0,s.createElement)(Ne,null):e.id&&!e.is_in_stock?(0,s.createElement)(Ne,{reason:(0,n.__)("This product is currently out of stock and cannot be purchased.","woo-gutenberg-products-block")}):(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Qe,{product:e,dispatchers:c}),(0,s.createElement)(ke,{value:t,min:r,max:o,step:a,disabled:i,onChange:c.setQuantity}),(0,s.createElement)(Oe,null))},Ge=()=>(0,s.createElement)(Oe,null),Ve=()=>(0,s.createElement)("p",null,"This is a placeholder for the grouped products form element."),Ke=()=>{const{showFormElements:e,productType:t}=ie();return e?"variable"===t?(0,s.createElement)(Ye,null):"grouped"===t?(0,s.createElement)(Ve,null):"external"===t?(0,s.createElement)(Ge,null):"simple"===t||"variation"===t?(0,s.createElement)(De,null):null:(0,s.createElement)(Oe,null)},He=(0,ge.withProductDataContext)((({className:e,showFormElements:t})=>{const{product:r}=(0,be.useProductDataContext)(),o=a()(e,"wc-block-components-product-add-to-cart",{"wc-block-components-product-add-to-cart--placeholder":(0,Se.x)(r)});return(0,s.createElement)(he,{product:r,showFormElements:t},(0,s.createElement)("div",{className:o},(0,s.createElement)(Ke,null)))}))},6996:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(721),o=r(386),a=r(6638);const n=(0,s.withFilteredAttributes)(a.Z)(o.Z)},3340:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(4617),o=r(5736),a=r(1478),n=r(2646),c=r(5271);const i=e=>{const t={};return void 0!==e.label&&(t.label=e.label),void 0!==e.required&&(t.required=e.required),void 0!==e.hidden&&(t.hidden=e.hidden),void 0===e.label||e.optionalLabel||(t.optionalLabel=(0,o.sprintf)(/* translators: %s Field label. */
(0,o.__)("%s (optional)","woo-gutenberg-products-block"),e.label)),e.priority&&((0,a.h)(e.priority)&&(t.index=e.priority),(0,n.H)(e.priority)&&(t.index=parseInt(e.priority,10))),e.hidden&&(t.required=!1),t},l=Object.entries(c.vr).map((([e,t])=>[e,Object.entries(t).map((([e,t])=>[e,i(t)])).reduce(((e,[t,r])=>(e[t]=r,e)),{})])).reduce(((e,[t,r])=>(e[t]=r,e)),{}),u=(e,t,r="")=>{const o=r&&void 0!==l[r]?l[r]:{};return e.map((e=>({key:e,...s.defaultAddressFields[e]||{},...o[e]||{},...t[e]||{}}))).sort(((e,t)=>e.index-t.index))}},6286:(e,t,r)=>{"use strict";r.d(t,{O:()=>d});var s=r(9307),o=r(4801),a=r(9818),n=r(1377),c=r(9456);const i=e=>{const t=null==e?void 0:e.detail;t&&t.preserveCartData||(0,a.dispatch)(o.CART_STORE_KEY).invalidateResolutionForStore()},l=e=>{(null!=e&&e.persisted||"back_forward"===(0,n.f)())&&(0,a.dispatch)(o.CART_STORE_KEY).invalidateResolutionForStore()},u=()=>{1===window.wcBlocksStoreCartListeners.count&&window.wcBlocksStoreCartListeners.remove(),window.wcBlocksStoreCartListeners.count--},d=()=>{(0,s.useEffect)((()=>((()=>{if(window.wcBlocksStoreCartListeners||(window.wcBlocksStoreCartListeners={count:0,remove:()=>{}}),(null===(e=window.wcBlocksStoreCartListeners)||void 0===e?void 0:e.count)>0)return void window.wcBlocksStoreCartListeners.count++;var e;document.body.addEventListener("wc-blocks_added_to_cart",i),document.body.addEventListener("wc-blocks_removed_from_cart",i),window.addEventListener("pageshow",l);const t=(0,c.Es)("added_to_cart","wc-blocks_added_to_cart"),r=(0,c.Es)("removed_from_cart","wc-blocks_removed_from_cart");window.wcBlocksStoreCartListeners.count=1,window.wcBlocksStoreCartListeners.remove=()=>{document.body.removeEventListener("wc-blocks_added_to_cart",i),document.body.removeEventListener("wc-blocks_removed_from_cart",i),window.removeEventListener("pageshow",l),t(),r()}})(),u)),[])}},9816:(e,t,r)=>{"use strict";r.d(t,{b:()=>b});var s=r(2991),o=r.n(s),a=r(9307),n=r(4801),c=r(9818),i=r(2629),l=r(3881),u=r(8832),d=r(6286);const p={first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""},E={...p,email:""},m={total_items:"",total_items_tax:"",total_fees:"",total_fees_tax:"",total_discount:"",total_discount_tax:"",total_shipping:"",total_shipping_tax:"",total_price:"",total_tax:"",tax_lines:n.EMPTY_TAX_LINES,currency_code:"",currency_symbol:"",currency_minor_unit:2,currency_decimal_separator:"",currency_thousand_separator:"",currency_prefix:"",currency_suffix:""},_=e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(0,i.decodeEntities)(t)]))),h={cartCoupons:n.EMPTY_CART_COUPONS,cartItems:n.EMPTY_CART_ITEMS,cartFees:n.EMPTY_CART_FEES,cartItemsCount:0,cartItemsWeight:0,crossSellsProducts:n.EMPTY_CART_CROSS_SELLS,cartNeedsPayment:!0,cartNeedsShipping:!0,cartItemErrors:n.EMPTY_CART_ITEM_ERRORS,cartTotals:m,cartIsLoading:!0,cartErrors:n.EMPTY_CART_ERRORS,billingAddress:E,shippingAddress:p,shippingRates:n.EMPTY_SHIPPING_RATES,isLoadingRates:!1,cartHasCalculatedShipping:!1,paymentMethods:n.EMPTY_PAYMENT_METHODS,paymentRequirements:n.EMPTY_PAYMENT_REQUIREMENTS,receiveCart:()=>{},receiveCartContents:()=>{},extensions:n.EMPTY_EXTENSIONS},b=(e={shouldSelect:!0})=>{const{isEditor:t,previewData:r}=(0,u._)(),s=null==r?void 0:r.previewCart,{shouldSelect:i}=e,m=(0,a.useRef)();(0,d.O)();const b=(0,c.useSelect)(((e,{dispatch:r})=>{if(!i)return h;if(t)return{cartCoupons:s.coupons,cartItems:s.items,crossSellsProducts:s.cross_sells,cartFees:s.fees,cartItemsCount:s.items_count,cartItemsWeight:s.items_weight,cartNeedsPayment:s.needs_payment,cartNeedsShipping:s.needs_shipping,cartItemErrors:n.EMPTY_CART_ITEM_ERRORS,cartTotals:s.totals,cartIsLoading:!1,cartErrors:n.EMPTY_CART_ERRORS,billingData:E,billingAddress:E,shippingAddress:p,extensions:n.EMPTY_EXTENSIONS,shippingRates:s.shipping_rates,isLoadingRates:!1,cartHasCalculatedShipping:s.has_calculated_shipping,paymentRequirements:s.paymentRequirements,receiveCart:"function"==typeof(null==s?void 0:s.receiveCart)?s.receiveCart:()=>{},receiveCartContents:"function"==typeof(null==s?void 0:s.receiveCartContents)?s.receiveCartContents:()=>{}};const o=e(n.CART_STORE_KEY),a=o.getCartData(),c=o.getCartErrors(),u=o.getCartTotals(),d=!o.hasFinishedResolution("getCartData"),m=o.isCustomerDataUpdating(),{receiveCart:b,receiveCartContents:S}=r(n.CART_STORE_KEY),g=_(a.billingAddress),v=a.needsShipping?_(a.shippingAddress):g,f=a.fees.length>0?a.fees.map((e=>_(e))):n.EMPTY_CART_FEES;return{cartCoupons:a.coupons.length>0?a.coupons.map((e=>({...e,label:e.code}))):n.EMPTY_CART_COUPONS,cartItems:a.items,crossSellsProducts:a.crossSells,cartFees:f,cartItemsCount:a.itemsCount,cartItemsWeight:a.itemsWeight,cartNeedsPayment:a.needsPayment,cartNeedsShipping:a.needsShipping,cartItemErrors:a.errors,cartTotals:u,cartIsLoading:d,cartErrors:c,billingData:(0,l.QI)(g),billingAddress:(0,l.QI)(g),shippingAddress:(0,l.QI)(v),extensions:a.extensions,shippingRates:a.shippingRates,isLoadingRates:m,cartHasCalculatedShipping:a.hasCalculatedShipping,paymentRequirements:a.paymentRequirements,receiveCart:b,receiveCartContents:S}}),[i]);return m.current&&o()(m.current,b)||(m.current=b),m.current}},3775:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var s=r(9307),o=r(9818),a=r(4801),n=r(2629),c=r(9816);const i=(e,t)=>{const r=e.find((({id:e})=>e===t));return r?r.quantity:0},l=e=>{const{addItemToCart:t}=(0,o.useDispatch)(a.CART_STORE_KEY),{cartItems:r,cartIsLoading:l}=(0,c.b)(),{createErrorNotice:u,removeNotice:d}=(0,o.useDispatch)("core/notices"),[p,E]=(0,s.useState)(!1),m=(0,s.useRef)(i(r,e));return(0,s.useEffect)((()=>{const t=i(r,e);t!==m.current&&(m.current=t)}),[r,e]),{cartQuantity:Number.isFinite(m.current)?m.current:0,addingToCart:p,cartIsLoading:l,addToCart:(r=1)=>(E(!0),t(e,r).then((()=>{d("add-to-cart")})).catch((e=>{u((0,n.decodeEntities)(e.message),{id:"add-to-cart",context:"wc/all-products",isDismissible:!0})})).finally((()=>{E(!1)})))}}},5918:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var s=r(2694),o=r(9818),a=r(9307);const n=()=>({dispatchStoreEvent:(0,a.useCallback)(((e,t={})=>{try{(0,s.doAction)(`experimental__woocommerce_blocks-${e}`,t)}catch(e){console.error(e)}}),[]),dispatchCheckoutEvent:(0,a.useCallback)(((e,t={})=>{try{(0,s.doAction)(`experimental__woocommerce_blocks-checkout-${e}`,{...t,storeCart:(0,o.select)("wc/store/cart").getCartData()})}catch(e){console.error(e)}}),[])})},8832:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var s=r(9307);r(9818);const o=(0,s.createContext)({isEditor:!1,currentPostId:0,currentView:"",previewData:{},getPreviewData:()=>({})}),a=()=>(0,s.useContext)(o)},9075:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var s=r(9307),o=r(9127),a=r.n(o);function n(e){const t=(0,s.useRef)(e);return a()(e,t.current)||(t.current=e),t.current}},3881:(e,t,r)=>{"use strict";r.d(t,{QI:()=>a});var s=r(3340),o=(r(6483),r(4617));r(2629),r(5271);const a=e=>{const t=Object.keys(o.defaultAddressFields),r=(0,s.Z)(t,{},e.country),a=Object.assign({},e);return r.forEach((({key:t="",hidden:r=!1})=>{r&&((e,t)=>e in t)(t,e)&&(a[t]="")})),a}},1377:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});const s=()=>window.performance&&window.performance.getEntriesByType("navigation").length?window.performance.getEntriesByType("navigation")[0].type:""},9456:(e,t,r)=>{"use strict";r.d(t,{Es:()=>n,Q9:()=>a});const s=window.CustomEvent||null,o=(e,{bubbles:t=!1,cancelable:r=!1,element:o,detail:a={}})=>{if(!s)return;o||(o=document.body);const n=new s(e,{bubbles:t,cancelable:r,detail:a});o.dispatchEvent(n)},a=({preserveCartData:e=!1})=>{o("wc-blocks_added_to_cart",{bubbles:!0,cancelable:!0,detail:{preserveCartData:e}})},n=(e,t,r=!1,s=!1)=>{if("function"!=typeof jQuery)return()=>{};const a=()=>{o(t,{bubbles:r,cancelable:s})};return jQuery(document).on(e,a),()=>jQuery(document).off(e,a)}},6576:(e,t,r)=>{"use strict";r.d(t,{K:()=>o,L:()=>s});const s=e=>e.is_purchasable||!1,o=e=>["simple","variable"].includes(e.type||"simple")},8519:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});const s=e=>null===e},1478:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});const s=e=>"number"==typeof e},7884:(e,t,r)=>{"use strict";r.d(t,{$n:()=>a,Kn:()=>o,Qr:()=>n});var s=r(8519);const o=e=>!(0,s.F)(e)&&e instanceof Object&&e.constructor===Object;function a(e,t){return o(e)&&t in e}const n=e=>0===Object.keys(e).length},2646:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});const s=e=>"string"==typeof e},461:()=>{},6684:()=>{},5482:()=>{},5589:()=>{}}]);